<!DOCTYPE html>
<html lang="en"><head>
<script src="latinrdatatransforme_spanish_files/libs/clipboard/clipboard.min.js"></script>
<script src="latinrdatatransforme_spanish_files/libs/quarto-html/tabby.min.js"></script>
<script src="latinrdatatransforme_spanish_files/libs/quarto-html/popper.min.js"></script>
<script src="latinrdatatransforme_spanish_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="latinrdatatransforme_spanish_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="latinrdatatransforme_spanish_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="latinrdatatransforme_spanish_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="latinrdatatransforme_spanish_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.3.450">

  <meta name="author" content="por Mara Destéfanis">
  <title>data.table</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="latinrdatatransforme_spanish_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="latinrdatatransforme_spanish_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="latinrdatatransforme_spanish_files/libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href="styles.css">
  <link href="latinrdatatransforme_spanish_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="latinrdatatransforme_spanish_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="latinrdatatransforme_spanish_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="latinrdatatransforme_spanish_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="latinrdatatransforme_spanish_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="latinrdatatransforme_spanish_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">data.table</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
por Mara Destéfanis 
</div>
</div>
</div>

</section>
<section id="uso-y-contribución-del-paquete-data.table-para-análisis-eficiente-de-bigdata" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Uso y contribución del paquete data.table para análisis eficiente de BigData</code></h2>
<p><br>
</p>
<p><code>Mara Destéfanis</code><br>
<a href="mailto:maradestefanis@gmail.com">maragdestefanis@gmail.com</a></p>
<p><br>
Descargar las diapositivas desde: <a href="https://ml.nau.edu/latinr_spanish.pdf" class="uri">https://ml.nau.edu/latinr_spanish.pdf</a><br>
<br>
</p>
<div class="column" style="width:10%;">
<p><img data-src="images/National%20Science%20Foundation.jpg" width="120"></p>
</div>
<div class="column" style="width:70%;">
<p>Fundado por el programa NSF POSE, proyecto #2303612. diapositivas adaptadas de Toby Dylan Hocking, Arun Srinivasan, y datatable-viñeta de introducción - gracias!</p>
</div>
<div class="column" style="width:10%;">
<p><img data-src="images/data.table.png" width="90"></p>
</div>
</section>
<section id="quien-soy" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>¿Quien soy?</code></h2>
<p><br>
<br>
</p>
<ul>
<li>Máster en Ciencia de Datos y Lic. Comunicación Social.</li>
<li>Profesora en Colaboración con los Postgrado de Negocios de la Universidad de Belgrano Argentina y la Universidad Siglo XXI Argentina</li>
<li>¡Uso R desde el año 2021.</li>
<li>Usuario de <code>data.table</code> desde 2023, contribuyo desde el año 2023.</li>
<li>Consultora y Periodista Independiente.</li>
</ul>
</section>
<section id="resumen-de-la-presentación" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Resumen de la presentación</code></h2>
<p><br>
<br>
<br>
</p>
<ol type="1">
<li>¿Qué es data.table?<br>
</li>
<li>¿Porqué data.table es tan popular/poderoso? (eficiente)<br>
</li>
<li>Usando data.table para análisis de big data eficiente.<br>
</li>
<li>Contribuyendo a data.table</li>
</ol>
<ul>
<li>Traducción de documentos de inglés a otro lenguaje, u$s500.</li>
<li>Viajes de premios: u$s 2700 para hablar de data.table en conferencias.</li>
<li>Participación en comunidad, problemas y solicitudes de extracción en GitHub.</li>
</ul>
</section>
<section>
<section id="qué-es-data.table" class="title-slide slide level1 center" data-transition="Slide" data-background="#2C8484">
<h1>1/4 ¿Qué es data.table?</h1>

</section>
<section id="data.frame-en-r" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>data.frame en R</code></h2>
<p><br>
</p>
<div class="columns">
<div class="column" style="width:80%;">
<ul>
<li><p>Estructura de datos en columnas 2D</p>
<ul>
<li>filas y columnas</li>
<li>subconjunto de filas <code>DF[DF$id != “a”, ]</code></li>
<li>selección de columnas <code>DF[, “val”]</code></li>
<li>subconjunto de filas &amp; selección de columnas <code>DF[DF$id != “a”, “val”]</code><br>
</li>
</ul></li>
<li><p>Por ahí va la cosa…</p></li>
</ul>
</div><div class="column" style="width:20%;">
<p><img data-src="images/tabla1.jpg" width="200"></p>
</div>
</div>
</section>
<section id="data.table" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><img data-src="images/data.table.png" width="80"> <code>data.table</code></h2>
<p><br>
</p>
<div class="column" style="width:60%;">
<ul>
<li><p>Como data.frame, pero con más poder en la sintaxis de código R, y la implementación de código en C.</p></li>
<li><p>Paquete R en CRAN desde 2006.</p></li>
<li><p>Creado por Matt Dowle, co-autor Arun Srinivasan desde 2013, + 50 colaboradores.</p></li>
<li><p>Hay <code>1463</code> paquetes en CRAN que requieren data.table (mas popular en porcentaje 0.05% de todos los paquetes de CRAN, rankea 11/19932 desde el 1 de octubre del 2023)</p></li>
</ul>
</div>
<div class="column" style="width:30%;">
<p><img data-src="images/tabla1.jpg" data-out.width="30%" width="200"></p>
</div>
</section>
<section id="data.table-y-tidyverse" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>data.table y tidyverse</code></h2>
<div class="column smaller" style="width:70%;">
<ul>
<li>El paquete de tidyverse 1.0 se publicó en <strong>CRAN</strong> en el año 2016.</li>
<li>Los paquetes de tidyverse <code>tibble + readr + tidyr + dplyr \~= data.table</code></li>
<li>tidyverse usa <strong>DF</strong>|&lt;…|&gt;, data.table usa <code>DT</code>[…][…]</li>
<li>Tidyverse es verborrágico (tiene muchos códigos), data.table es conciso (pocos códigos) por ejemplo: tibble |&gt;filter(x==“a”) |&gt; group_by(z) |&gt;summarise(m=mean(y)) <code>vs</code>: <code>DT\[x=="a", .(m=mean(y)), by=Z\]</code></li>
</ul>
</div>
<div class="column smaller" style="width:20%;">
<p><img data-src="images/slide7.jpg" width="400"> <img data-src="images/data.tables.png"></p>
</div>
<ul>
<li>Tidyverse tiene muchas dependencias, data.table no.(es fácil de instalar)</li>
<li>Tidyverse con frecuencia presenta quiebres por cambios, data.table se asegura de tener compatibilidad (para los usuarios es fácil la <strong>actualización</strong> hacia nuevas versiones de data.table)</li>
</ul>
</section></section>
<section>
<section id="porqué-data.table-es-tan-popularpoderoso-eficiente" class="title-slide slide level1 smaller center" data-transition="Slide" data-background="#2C8484">
<h1>2/4 ¿Porqué data.table es tan popular/poderoso? (eficiente)</h1>

</section>
<section id="porque-data-table-tiene-dos-clases-de-eficiencia" class="slide level2" data-background="#E5E9E9">
<h2><code>Porque Data table tiene dos clases de eficiencia</code></h2>
<p><br>
</p>
<ul>
<li><p>Eficiencia en la <strong>sintaxis de R </strong> (permite reducir el tiempo de programación)<br>
</p></li>
<li><p>Eficiencia en la <strong>implementación de código C</strong> ( ya que reduce tiempo y memoria. Así un conjunto de datos puede analizarse con pocos recursos de cómputo)</p></li>
</ul>
</section>
<section id="sintaxis-de-r-con-data-table" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Sintaxis de R con data table</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>Matt habló en el 2014 a usuarios de R: <a href="https://youtu.be/qLrdYhizEMg?t=1m54s" class="uri">https://youtu.be/qLrdYhizEMg?t=1m54s</a><br>
<img data-src="images/slide10.jpg"></li>
</ul>
</section>
<section id="sintaxis-del-código-r-con-data-table" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Sintaxis del código R con data table</code></h2>
<div class="column smaller" style="width:70%;">
<ul>
<li>Los datos también se estructuran en columnas.
<ul>
<li>2D - <code>filas</code> y <code>columnas</code></li>
</ul></li>
<li><code>subconjuntos</code> de filas - DT[<code>id!="a"</code>,]</li>
<li><code>selección</code> de columnas - DT[, <code>val</code>]</li>
<li><code>computable en</code> columnas - DT[, <code>mean(val)</code>]</li>
<li><code>subconjunto</code> de filas &amp; <code>selección/ computable en</code> columnas - DT[<code>id!="a", mean(val)</code>]</li>
<li>3er dimensión virtual - <code>group by</code><br>
</li>
</ul>
</div>
<div class="column smaller" style="width:20%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/slide11.jpg" width="200"></p>
</figure>
</div>
</div>
</section>
<section id="data.framedf-vs-data.tabledt" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>data.frame(DF) vs data.table(DT)</code></h2>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide121.jpg"></p>
</div>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide122.jpg"></p>
</div>
<ul>
<li>Considera subconjuntos de filas con “abd” en columna de <strong>código,</strong> luego computa la suma de los valores en la columna <strong>vaIA</strong>.<br>
</li>
<li>DF necesita que se repita, DT no lo requiere.<br>
</li>
<li><code>sum</code> puede ponerse en corchetes con DT rara vez en DF.</li>
</ul>
</section>
<section id="data.framedf-vs-data.tabledt-1" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>data.frame(DF) vs data.table(DT)</code></h2>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide131.jpg"></p>
</div>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide132.jpg"></p>
</div>
<ul>
<li><p>Para los subconjuntos de filas con “abd” en columna <code>código</code>, setea los valores en la columna <code>vaIA</code> para valores perdidos/NA</p></li>
<li><p>En DF necesitamos repetir, en DT no.</p></li>
<li><p>DF usa asignación de flecha <code>\&lt;-</code>, DT usa morsa <code>:=</code></p></li>
</ul>
</section>
<section id="data.framedf-vs-data.tabledt-2" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>data.frame(DF) vs data.table(DT)</code></h2>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide141.jpg"></p>
</div>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide142.jpg"></p>
</div>
<ul>
<li>Resumir por grupo: considera el subgrupo de filas con “abd” en columna de <code>código</code>. Luego calcula la suma de los valores en las columnas<code>vaIA</code> y <code>vaIB</code>, para cada valor único de la columna de identificación.<br>
</li>
<li>En DT todo está entre <code>corchetes DT []</code>, si usamos DF necesitamos usar otras funciones como por ejemplo: agregar <strong>cbind</strong>.</li>
</ul>
</section>
<section id="data.framedf-vs-data.tabledt-3" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>data.frame(DF) vs data.table(DT)</code></h2>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide151.jpg"></p>
</div>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide152.jpg"></p>
</div>
<ul>
<li><p>Modificar al unirse: cada fila de DT1 que coincida con una fila de DT2 en las columnas de identificación y código, setea vaIA en val.</p></li>
<li><p>Fácil de hacer con DT,<code>:=</code> asignación y <code>on=</code> argumento.</p></li>
<li><p>Con DF en base R es posible hacer pero difícil.</p></li>
</ul>
</section>
<section id="dos-clases-de-eficiencia-de-data-table" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>dos clases de eficiencia de data table</code></h2>
<p><br>
<br>
</p>
<ul>
<li>Eficiencia en sintaxis de código R (permite disminuir el tiempo de programación)<br>
</li>
<li><strong>Implementando código C es eficiente ya que disminuye el tiempo y la memoria (sobre todo cuando hay largos conjuntos de datos ya que permite analizarlos usando pocos recursos de cómputo)</strong></li>
</ul>
</section>
<section id="section" class="slide level2">
<h2></h2>
<p><strong><code>data.table::fread</code> es extremadamente eficiente en lector de archivos CSV</strong></p>
<p>Lee números reales de CSV, 100 x N<br>
<img data-src="images/slide7.png"></p>
<p>Fuente del código <a href="https://tdhock.github.io/blog/2023/dt-atime-figures/" class="uri">https://tdhock.github.io/blog/2023/dt-atime-figures/</a></p>
</section>
<section id="section-1" class="slide level2 smaller" data-transition="Slide">
<h2></h2>
<p><strong>data. table calcula resúmenes 100 veces más rápido que otros.</strong></p>
<p>Promedio-mean-, desviación estándar -SD- sobre 10 números reales, <em>Ntimes</em> <img data-src="images/slide18.jpg"></p>
<p>En Machine Learning, la validación cruzada k-fold estima la pérdida por hiperparámetros, como los números de <em>epochs</em> de entrenamiento en una red neuronal. data.table puede computar eficientemente el promedio de pérdida sobre k=10, por cada N <em>epochs</em></p>
</section>
<section id="section-2" class="slide level2 smaller" data-transition="Slide">
<h2></h2>
<p><strong>data.table::fwrite es extremadamente eficiente CSV file writer</strong></p>
<p>Escribe números reales desde CSV, 100 x N</p>
<p><img data-src="images/slide21.jpg"><br>
Fuente del código <a href="https://tdhock.github.io/blog/2023/dt-atime-figures/" class="uri">https://tdhock.github.io/blog/2023/dt-atime-figures/</a></p>
</section>
<section id="el-paquete-mas-sobreestimado" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>El paquete mas sobreestimado</code></h2>
<p><br>
<img data-src="images/connortw.jpg">Data.table es el paquete R más subestimado. Me he ahorrado <code>días</code> esperando que se completen los análisis.</p>
</section>
<section id="poderoso" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Poderoso</code></h2>

<img data-src="images/alexandertw.jpg" class="r-stretch"><p>Alguien debería simplemente escribir una versión de data.table de <strong>#Rstat</strong> para <strong>#python</strong>, fin de la historia. No existe nada tan poderoso en este momento.</p>
</section>
<section id="data.table-data.table" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>data.table data.table</code></h2>

<img data-src="images/joeytw.jpg" class="r-stretch"></section>
<section id="gran-tristeza" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Gran tristeza</code></h2>

<img data-src="images/JimSavagetw.jpg" class="r-stretch"><p>Con gran tristeza me veo hoy forzada a usar data.table.</p>
</section></section>
<section>
<section id="usando-data.table-para-análisis-eficiente-en-bigdata" class="title-slide slide level1 smaller center" data-transition="Slide" data-background="#2C8484">
<h1>3/4 Usando data.table para análisis eficiente en bigdata</h1>

</section>
<section id="instalando-data.table-obtenemos-pdf-docs" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Instalando data.table, obtenemos PDF docs</code></h2>
<ul>
<li><p><code>Ejercicio:</code> instalar la versión de desarrollo desde GitHub, que contiene la más recientes características.</p></li>
<li><p>Descargar <em>cheat sheet</em> <a href="http://ml.nau.edu/dtcheat.pdf" class="uri">http://ml.nau.edu/dtcheat.pdf</a></p></li>
<li><p>Comenzando con R - edición tinyverse <a href="http://ml.nau.edu/tiny.pdf" class="uri">http://ml.nau.edu/tiny.pdf</a><br>
<br>
<strong>&gt;install.packages(“remotes”)<br>
&gt;remotes::install:github(“Rdatatable/data.table”)<br>
(necesitas compilar: xcode para mac o rtools para windows)<br>
o: si no tienes un compilador: instala desde CRAN la última actualización:</strong></p>
<p><strong>&gt; install.packages(“data.table”)<br>
&gt; data.table::update_dev_pkg()</strong></p></li>
</ul>
</section>
<section id="creando-data.table-desde-r-objectos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Creando data.table desde R objectos</code></h2>
<ul>
<li><p>data.table(columna_nombre=columna_valor), como data.frame.</p></li>
<li><p>valores en columnas cortas reciclados a lo largo de la columna más grande.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">data.table</span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="at">ID =</span> <span class="fu">c</span>(<span class="st">"b"</span>, <span class="st">"b"</span>,<span class="st">"a"</span>, <span class="st">"a"</span>,<span class="st">"c"</span>),</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,</span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="at">b =</span> <span class="dv">7</span>,</span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="at">c =</span> <span class="dv">13</span><span class="sc">:</span><span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       ID     a     b     c
   &lt;char&gt; &lt;int&gt; &lt;num&gt; &lt;int&gt;
1:      b     1     7    13
2:      b     2     7    14
3:      a     1     7    15
4:      a     2     7    16
5:      c     1     7    17
6:      b     2     7    18</code></pre>
</div>
</div>
</section>
<section id="data.table-vs-columnas-frame" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>data.table vs columnas frame</code></h2>
<ul>
<li>Los nombres de las variables no sintácticas se mantienen de forma predeterminada.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">head</span>(<span class="fu">data.table</span>(<span class="st">"10^8 m^3"</span><span class="ot">=</span>Nile, <span class="at">year=</span><span class="dv">1871</span><span class="sc">:</span><span class="dv">1970</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   10^8 m^3  year
       &lt;ts&gt; &lt;int&gt;
1:     1120  1871
2:     1160  1872
3:      963  1873
4:     1210  1874
5:     1160  1875
6:     1160  1876</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">head</span>(<span class="fu">data.frame</span>(<span class="st">"10^8 m^3"</span><span class="ot">=</span>Nile, <span class="at">year=</span><span class="dv">1871</span><span class="sc">:</span><span class="dv">1970</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X10.8.m.3 year
1      1120 1871
2      1160 1872
3       963 1873
4      1210 1874
5      1160 1875
6      1160 1876</code></pre>
</div>
</div>
</section>
<section id="data.table-vs-columnas-de-frame-list" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>data.table vs columnas de frame list</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">data.table</span>(<span class="at">L=</span><span class="fu">list</span>(<span class="st">"scalar"</span>, <span class="fu">c</span>(<span class="st">"vec"</span>,<span class="st">"tor"</span>)),<span class="at">x=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         L     x
    &lt;list&gt; &lt;int&gt;
1:  scalar     1
2: vec,tor     2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">data.frame</span>(<span class="at">L=</span><span class="fu">I</span>(<span class="fu">list</span>(<span class="st">"scalar"</span>, <span class="fu">c</span>(<span class="st">"vec"</span>,<span class="st">"tor"</span>))),<span class="at">x=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         L x
1   scalar 1
2 vec, tor 2</code></pre>
</div>
</div>
</section>
<section id="ejercicios" class="slide level2" data-background="#E5E9E9">
<h2><code>Ejercicios</code></h2>
<p><br>
- <code>Tu turno</code>: convertí el conjunto de <strong>datos::flores</strong> en data table vía data.table.</p>
<ul>
<li>Crea un data.table con una fila, y columnas con los siguientes datos: tu nombre (<em>character</em>), años de experiencia con R (<em>numeric</em>), lugar de nacimiento(<em>character</em>), ciudad de residencia(<em>character</em>), idiomas(s) (<em>list of character</em>)</li>
</ul>
</section>
<section id="lee-csv-desde-el-archivo" class="slide level2" data-background="#E5E9E9">
<h2><code>Lee CSV desde el archivo</code></h2>
<ul>
<li>Vuelos que despegaron de Nueva York (JFK, LGA o EWR) durante 2013. datos::vuelos</li>
</ul>
<p>if(!file.exists(“vuelos.csv”))download.file( “https://ml.nau.edu/vuelos.csv”, “vuelos.csv”)</p>
<p>(vuelos&lt;-data.table::fread(“vuelos.csv”))</p>
</section>
<section id="lee-csv-desde-el-comando-shell" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Lee CSV desde el comando shell</code></h2>
<p><br>
<br>
- Es útil con comandos que generan datos de salida en CSV ( no archivos intermediarios)<br>
- <em><code>egrep</code></em> es útil si no necesitas/o querés leer todo el conjunto de datos en R</p>
<p><strong>data.table::fread(“egrep ‘LAX|anio’ vuelos.csv)</strong></p>
</section>
<section id="ejercicio-lee-csv-desde-url" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Ejercicio</code>: Lee CSV desde URL</h2>
<ul>
<li>Usualmente puede descargarse el archivo primero <em>download.file()</em>, para evitar tener que bajar de nuevo el archivo <em>re-starting R</em> Es conveniente.<br>
<br>
</li>
<li>Llegó tu turno. Trata con el siguiente código:</li>
</ul>
<p><strong>vuelos &lt;- data.table::fread(“http://ml.nau.edu/vuelos.csv”)</strong></p>
</section>
<section id="subconjunto-de-filas-usando-i" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Subconjunto de filas usando i</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee marcador de posición para cada uno de ellos.</li>
</ul>

<img data-src="images/slide33.jpg" class="r-stretch"></section>
<section id="subconjunto-de-filas-lógicas" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Subconjunto de filas lógicas</code></h2>
<ul>
<li>Selecciona todos los vuelos con “JFK” del aeropuerto de origen en el mes de Junio.<br>
<br>
</li>
<li>DT[rows, ] la coma no es necesaria (pero permitida).<br>
</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>vuelos[origen <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">&amp;</span> mes <span class="sc">==</span> <span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       anio   mes   dia horario_salida salida_programada atraso_salida
      &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
   1:  2013     6     1              2              2359             3
   2:  2013     6     1            538               545            -7
   3:  2013     6     1            539               540            -1
   4:  2013     6     1            553               600            -7
   5:  2013     6     1            554               600            -6
  ---                                                                 
9468:  2013     6    30             NA              2000            NA
9469:  2013     6    30             NA              1725            NA
9470:  2013     6    30             NA              2045            NA
9471:  2013     6    30             NA              1405            NA
9472:  2013     6    30             NA              1945            NA
      horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
   1:             341                350             -9        B6   739
   2:             925                922              3        B6   725
   3:             832                840             -8        AA   701
   4:             700                711            -11        EV  5716
   5:             851                908            -17        UA  1159
  ---                                                                  
9468:              NA               2127             NA        9E  4287
9469:              NA               2045             NA        AA   221
9470:              NA               2308             NA        9E  3433
9471:              NA               1524             NA        EV  5712
9472:              NA               2104             NA        EV  5714
      codigo_cola origen destino tiempo_vuelo distancia  hora minuto
           &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
   1:      N618JB    JFK     PSE          200      1617    23     59
   2:      N806JB    JFK     BQN          203      1576     5     45
   3:      N5EAAA    JFK     MIA          140      1089     5     40
   4:      N835AS    JFK     IAD           42       228     6      0
   5:      N33132    JFK     LAX          330      2475     6      0
  ---                                                               
9468:        &lt;NA&gt;    JFK     BWI           NA       184    20      0
9469:      N5EXAA    JFK     MIA           NA      1089    17     25
9470:        &lt;NA&gt;    JFK     CVG           NA       589    20     45
9471:      N877AS    JFK     IAD           NA       228    14      5
9472:      N836AS    JFK     IAD           NA       228    19     45
               fecha_hora
                   &lt;POSc&gt;
   1: 2013-06-01 23:00:00
   2: 2013-06-01 05:00:00
   3: 2013-06-01 05:00:00
   4: 2013-06-01 06:00:00
   5: 2013-06-01 06:00:00
  ---                    
9468: 2013-06-30 20:00:00
9469: 2013-06-30 17:00:00
9470: 2013-06-30 20:00:00
9471: 2013-06-30 14:00:00
9472: 2013-06-30 19:00:00</code></pre>
</div>
</div>
</section>
<section id="conjunto-de-filas-enteras" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Conjunto de filas enteras</code></h2>
<ul>
<li>Toma los primeros dos vuelos, o todos exceptuando el primero de los dos.<br>
</li>
<li>Conjunto de enteros (<em>Integer</em>) en DT trabaja como en DF.<br>
</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>vuelos[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    anio   mes   dia horario_salida salida_programada atraso_salida
   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
1:  2013     1     1            517               515             2
2:  2013     1     1            533               529             4
   horario_llegada llegada_programada atraso_llegada aerolinea vuelo
             &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
1:             830                819             11        UA  1545
2:             850                830             20        UA  1714
   codigo_cola origen destino tiempo_vuelo distancia  hora minuto
        &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
1:      N14228    EWR     IAH          227      1400     5     15
2:      N24211    LGA     IAH          227      1416     5     29
            fecha_hora
                &lt;POSc&gt;
1: 2013-01-01 05:00:00
2: 2013-01-01 05:00:00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>vuelos[<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         anio   mes   dia horario_salida salida_programada atraso_salida
        &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
     1:  2013     1     1            542               540             2
     2:  2013     1     1            544               545            -1
     3:  2013     1     1            554               600            -6
     4:  2013     1     1            554               558            -4
     5:  2013     1     1            555               600            -5
    ---                                                                 
336770:  2013     9    30             NA              1455            NA
336771:  2013     9    30             NA              2200            NA
336772:  2013     9    30             NA              1210            NA
336773:  2013     9    30             NA              1159            NA
336774:  2013     9    30             NA               840            NA
        horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                  &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
     1:             923                850             33        AA  1141
     2:            1004               1022            -18        B6   725
     3:             812                837            -25        DL   461
     4:             740                728             12        UA  1696
     5:             913                854             19        B6   507
    ---                                                                  
336770:              NA               1634             NA        9E  3393
336771:              NA               2312             NA        9E  3525
336772:              NA               1330             NA        MQ  3461
336773:              NA               1344             NA        MQ  3572
336774:              NA               1020             NA        MQ  3531
        codigo_cola origen destino tiempo_vuelo distancia  hora minuto
             &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
     1:      N619AA    JFK     MIA          160      1089     5     40
     2:      N804JB    JFK     BQN          183      1576     5     45
     3:      N668DN    LGA     ATL          116       762     6      0
     4:      N39463    EWR     ORD          150       719     5     58
     5:      N516JB    EWR     FLL          158      1065     6      0
    ---                                                               
336770:        &lt;NA&gt;    JFK     DCA           NA       213    14     55
336771:        &lt;NA&gt;    LGA     SYR           NA       198    22      0
336772:      N535MQ    LGA     BNA           NA       764    12     10
336773:      N511MQ    LGA     CLE           NA       419    11     59
336774:      N839MQ    LGA     RDU           NA       431     8     40
                 fecha_hora
                     &lt;POSc&gt;
     1: 2013-01-01 05:00:00
     2: 2013-01-01 05:00:00
     3: 2013-01-01 06:00:00
     4: 2013-01-01 05:00:00
     5: 2013-01-01 06:00:00
    ---                    
336770: 2013-09-30 14:00:00
336771: 2013-09-30 22:00:00
336772: 2013-09-30 12:00:00
336773: 2013-09-30 11:00:00
336774: 2013-09-30 08:00:00</code></pre>
</div>
</div>
</section>
<section id="ordenar-filas" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Ordenar filas</code></h2>
<ul>
<li>Ordena los vuelos primero por columna original en orden ascendente, y luego por destinos en orden descendentes.<br>
<br>
</li>
<li>Ordena data.table de manera eficiente que se integre a la base R en 2016!</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>vuelos[<span class="fu">order</span>(origen, <span class="sc">-</span>destino)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         anio   mes   dia horario_salida salida_programada atraso_salida
        &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
     1:  2013     1     2            905               822            43
     2:  2013     1     3            848               850            -2
     3:  2013     1     4            901               850            11
     4:  2013     1     6            843               848            -5
     5:  2013     1     7            858               850             8
    ---                                                                 
336772:  2013     9    30           1752              1759            -7
336773:  2013     9    30           1851              1900            -9
336774:  2013     9    30           1903              1859             4
336775:  2013     9    30           1944              1950            -6
336776:  2013     9    30           1955              2000            -5
        horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                  &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
     1:            1313               1045             NA        EV  4140
     2:            1149               1113             36        EV  4125
     3:            1120               1113              7        EV  4125
     4:            1053               1111            -18        EV  4625
     5:            1105               1113             -8        EV  4125
    ---                                                                  
336772:            2021               2031            -10        DL    61
336773:            2114               2132            -18        DL   947
336774:            2125               2126             -1        FL   645
336775:            2208               2215             -7        MQ  3662
336776:            2219               2230            -11        DL  1147
        codigo_cola origen destino tiempo_vuelo distancia  hora minuto
             &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
     1:      N15912    EWR     XNA           NA      1131     8     22
     2:      N21129    EWR     XNA          196      1131     8     50
     3:      N16178    EWR     XNA          168      1131     8     50
     4:      N12172    EWR     XNA          174      1131     8     48
     5:      N13118    EWR     XNA          163      1131     8     50
    ---                                                               
336772:      N683DA    LGA     ATL          104       762    17     59
336773:      N979DL    LGA     ATL           97       762    19      0
336774:      N939AT    LGA     ATL          101       762    18     59
336775:      N507MQ    LGA     ATL          100       762    19     50
336776:      N992DL    LGA     ATL           99       762    20      0
                 fecha_hora
                     &lt;POSc&gt;
     1: 2013-01-02 08:00:00
     2: 2013-01-03 08:00:00
     3: 2013-01-04 08:00:00
     4: 2013-01-06 08:00:00
     5: 2013-01-07 08:00:00
    ---                    
336772: 2013-09-30 17:00:00
336773: 2013-09-30 19:00:00
336774: 2013-09-30 18:00:00
336775: 2013-09-30 19:00:00
336776: 2013-09-30 20:00:00</code></pre>
</div>
</div>
</section>
<section id="ejercicios-1" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Ejercicios</code></h2>
<p><br>
<br>
- Tu turno. ¿Cuantas filas hay con <strong>aerolinea</strong> “AA” y <strong>destino</strong> “LAX”?<br>
- Si ordenas la tabla. ¿Cuál es la primer fecha y ultima mes/dia/hora?<br>
<br>
- Una pista: puedes usar DT[…][…] en una cadena.<br>
Similar para <em>piping</em>, DF |&gt;…|&gt;…</p>
</section>
<section id="computa-columnas-in-j" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Computa columnas in j</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee Marcador de posición para cada una de ellas.<br>
<img data-src="images/slide38.jpg"></li>
</ul>
</section>
<section id="selecciona-una-columna" class="slide level2 smaller" data-background="#E5E9E9">
<h2><code>Selecciona una columna</code></h2>
<ul>
<li><p>DT[,“arr_delay”] -&gt; data.table con una columna.</p></li>
<li><p>DT[,“arr_delay”] -&gt; vector<br>
como DT$arr_delay o DT[[“arr_delay”]] en base a R</p></li>
<li><p><strong>Ejercicio:</strong> usa hist() para dibujar un histograma de atrás de llegadas</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">str</span>(vuelos[, <span class="st">"atraso_llegada"</span> ])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'data.table' and 'data.frame':  336776 obs. of  1 variable:
 $ atraso_llegada: num  11 20 33 -18 -25 12 19 -14 -8 8 ...
 - attr(*, ".internal.selfref")=&lt;externalptr&gt; </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">str</span>(vuelos[, atraso_llegada]) <span class="co"># como DT[["atraso_llegada"]] o DT$retraso_llegada</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:336776] 11 20 33 -18 -25 12 19 -14 -8 8 ...</code></pre>
</div>
</div>
</section>
<section id="selecciona-2-columnas-con-literal" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Selecciona 2 columnas con literal</code></h2>
<div class="column smaller" style="width:40%;">
<ul>
<li><p>Si data.table/list/. es usada en j, entonces un data.table se retorna.</p></li>
<li><p>También puedes usar c(“name”) en j</p></li>
</ul>
</div>
<div class="column smaller" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>vuelos[, <span class="fu">data.table</span>(atraso_llegada, atraso_salida)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        atraso_llegada atraso_salida
                 &lt;num&gt;         &lt;num&gt;
     1:             11             2
     2:             20             4
     3:             33             2
     4:            -18            -1
     5:            -25            -6
    ---                             
336772:             NA            NA
336773:             NA            NA
336774:             NA            NA
336775:             NA            NA
336776:             NA            NA</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>vuelos[, <span class="fu">c</span>(<span class="st">"atraso_llegada"</span>, <span class="st">"atraso_salida"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        atraso_llegada atraso_salida
                 &lt;num&gt;         &lt;num&gt;
     1:             11             2
     2:             20             4
     3:             33             2
     4:            -18            -1
     5:            -25            -6
    ---                             
336772:             NA            NA
336773:             NA            NA
336774:             NA            NA
336775:             NA            NA
336776:             NA            NA</code></pre>
</div>
</div>
</div>
</section>
<section id="selecciona-dos-columnas-con-variable" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Selecciona dos columnas con variable</code></h2>
<div class="column smaller" style="width:40%;">
<ul>
<li>Puedes usar con<code>=FALSE o doble puntos ..</code><br>
( como un nivel arriba en la ruta del archivo <em>unix</em>, busca <em>select_cols</em> no como un nombre de columna)</li>
</ul>
</div>
<div class="column smaller" style="width:40%;">
<pre><code>::: {.cell}

```{.r .cell-code}
(DT=data.table(x=1:2, y=3:4,
  select_cols=c("foo", "bar")))
```

::: {.cell-output .cell-output-stdout}
```
       x     y select_cols
   &lt;int&gt; &lt;int&gt;      &lt;char&gt;
1:     1     3         foo
2:     2     4         bar
```
:::
:::

::: {.cell}

```{.r .cell-code}
select_cols=c("x", "y")
DT[, select_cols]
```

::: {.cell-output .cell-output-stdout}
```
[1] "foo" "bar"
```
:::
:::</code></pre>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>DT[,..select_cols]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       x     y
   &lt;int&gt; &lt;int&gt;
1:     1     3
2:     2     4</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>DT[, select_cols, with<span class="ot">=</span><span class="cn">FALSE</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       x     y
   &lt;int&gt; &lt;int&gt;
1:     1     3
2:     2     4</code></pre>
</div>
</div>
</div>
</section>
<section id="selecciona-todas-las-columnas-excepto-dos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Selecciona todas las columnas excepto dos</code></h2>
<ul>
<li>Puedes usar ambos! o para negar la selección de columnas.<br>
</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>retrasos_cols<span class="ot">=</span> <span class="fu">c</span>(<span class="st">"atraso_llegada"</span>, <span class="st">"atraso_salida"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">head</span>(vuelos[, <span class="sc">!</span>..retrasos_cols])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    anio   mes   dia horario_salida salida_programada horario_llegada
   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;           &lt;int&gt;
1:  2013     1     1            517               515             830
2:  2013     1     1            533               529             850
3:  2013     1     1            542               540             923
4:  2013     1     1            544               545            1004
5:  2013     1     1            554               600             812
6:  2013     1     1            554               558             740
   llegada_programada aerolinea vuelo codigo_cola origen destino tiempo_vuelo
                &lt;int&gt;    &lt;char&gt; &lt;int&gt;      &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;
1:                819        UA  1545      N14228    EWR     IAH          227
2:                830        UA  1714      N24211    LGA     IAH          227
3:                850        AA  1141      N619AA    JFK     MIA          160
4:               1022        B6   725      N804JB    JFK     BQN          183
5:                837        DL   461      N668DN    LGA     ATL          116
6:                728        UA  1696      N39463    EWR     ORD          150
   distancia  hora minuto          fecha_hora
       &lt;num&gt; &lt;num&gt;  &lt;num&gt;              &lt;POSc&gt;
1:      1400     5     15 2013-01-01 05:00:00
2:      1416     5     29 2013-01-01 05:00:00
3:      1089     5     40 2013-01-01 05:00:00
4:      1576     5     45 2013-01-01 05:00:00
5:       762     6      0 2013-01-01 06:00:00
6:       719     5     58 2013-01-01 05:00:00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">head</span>(vuelos[, <span class="sc">-</span>..retrasos_cols])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    anio   mes   dia horario_salida salida_programada horario_llegada
   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;           &lt;int&gt;
1:  2013     1     1            517               515             830
2:  2013     1     1            533               529             850
3:  2013     1     1            542               540             923
4:  2013     1     1            544               545            1004
5:  2013     1     1            554               600             812
6:  2013     1     1            554               558             740
   llegada_programada aerolinea vuelo codigo_cola origen destino tiempo_vuelo
                &lt;int&gt;    &lt;char&gt; &lt;int&gt;      &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;
1:                819        UA  1545      N14228    EWR     IAH          227
2:                830        UA  1714      N24211    LGA     IAH          227
3:                850        AA  1141      N619AA    JFK     MIA          160
4:               1022        B6   725      N804JB    JFK     BQN          183
5:                837        DL   461      N668DN    LGA     ATL          116
6:                728        UA  1696      N39463    EWR     ORD          150
   distancia  hora minuto          fecha_hora
       &lt;num&gt; &lt;num&gt;  &lt;num&gt;              &lt;POSc&gt;
1:      1400     5     15 2013-01-01 05:00:00
2:      1416     5     29 2013-01-01 05:00:00
3:      1089     5     40 2013-01-01 05:00:00
4:      1576     5     45 2013-01-01 05:00:00
5:       762     6      0 2013-01-01 06:00:00
6:       719     5     58 2013-01-01 05:00:00</code></pre>
</div>
</div>
</section>
<section id="selecciona-rangos-de-columnas" class="slide level2" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Selecciona rangos de columnas</code></h2>
<ul>
<li>Puedes usar columna1:columna2 para seleccionar ambas, o todas entre ellas(y puedes usar negativo con <code>!</code> o <code>-</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">head</span>(vuelos[, anio<span class="sc">:</span>dia])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    anio   mes   dia
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
1:  2013     1     1
2:  2013     1     1
3:  2013     1     1
4:  2013     1     1
5:  2013     1     1
6:  2013     1     1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">head</span>(vuelos[, <span class="sc">!</span>(anio<span class="sc">:</span>dia)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   horario_salida salida_programada atraso_salida horario_llegada
            &lt;int&gt;             &lt;int&gt;         &lt;num&gt;           &lt;int&gt;
1:            517               515             2             830
2:            533               529             4             850
3:            542               540             2             923
4:            544               545            -1            1004
5:            554               600            -6             812
6:            554               558            -4             740
   llegada_programada atraso_llegada aerolinea vuelo codigo_cola origen destino
                &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;      &lt;char&gt; &lt;char&gt;  &lt;char&gt;
1:                819             11        UA  1545      N14228    EWR     IAH
2:                830             20        UA  1714      N24211    LGA     IAH
3:                850             33        AA  1141      N619AA    JFK     MIA
4:               1022            -18        B6   725      N804JB    JFK     BQN
5:                837            -25        DL   461      N668DN    LGA     ATL
6:                728             12        UA  1696      N39463    EWR     ORD
   tiempo_vuelo distancia  hora minuto          fecha_hora
          &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;              &lt;POSc&gt;
1:          227      1400     5     15 2013-01-01 05:00:00
2:          227      1416     5     29 2013-01-01 05:00:00
3:          160      1089     5     40 2013-01-01 05:00:00
4:          183      1576     5     45 2013-01-01 05:00:00
5:          116       762     6      0 2013-01-01 06:00:00
6:          150       719     5     58 2013-01-01 05:00:00</code></pre>
</div>
</div>
</section>
<section id="renombra-y-computa-las-columnas" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Renombra y computa las columnas</code></h2>
<ul>
<li><strong>Ejercicio</strong>: trata de usar .() o list() en vez de data.table() en j</li>
<li>.() es un alias de list()–<em>items</em> en lista son columnas de la tabla.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>vuelos[, <span class="fu">data.table</span>(<span class="at">puntodestino=</span>destino, <span class="at">aire_horas=</span>tiempo_vuelo<span class="sc">/</span><span class="dv">60</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        puntodestino aire_horas
              &lt;char&gt;      &lt;num&gt;
     1:          IAH   3.783333
     2:          IAH   3.783333
     3:          MIA   2.666667
     4:          BQN   3.050000
     5:          ATL   1.933333
    ---                        
336772:          DCA         NA
336773:          SYR         NA
336774:          BNA         NA
336775:          CLE         NA
336776:          RDU         NA</code></pre>
</div>
</div>
</section>
<section id="resumir-todas-las-filas" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Resumir todas las filas</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>vuelos[, .(<span class="at">m_arr =</span> <span class="fu">mean</span>(atraso_llegada), <span class="at">m_dep =</span> <span class="fu">mean</span>(atraso_salida))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   m_arr m_dep
   &lt;num&gt; &lt;num&gt;
1:    NA    NA</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>vuelos[, .(<span class="at">rango_llegada =</span> <span class="fu">range</span>(atraso_llegada), <span class="at">stat=</span><span class="fu">c</span>(<span class="st">"min"</span>,<span class="st">"max"</span>))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   rango_llegada   stat
           &lt;num&gt; &lt;char&gt;
1:            NA    min
2:            NA    max</code></pre>
</div>
</div>
<ul>
<li>En <code>data.table/list/.</code> en j, resume funciones que pueden usarse.</li>
<li>En este caso podemos usar <code>mean</code>, con retorno de un número simple.</li>
<li>Podemos también usar <code>range</code>, con la cual retorna dos números.</li>
<li>Podemos computar <code>mean</code> <code>min</code> <code>max</code> de arribos y partidas de todos los vuelos.</li>
<li>Ejercicio: computa min/max <strong>tiempo_vuelo</strong> y <strong>distancia</strong></li>
</ul>
</section>
<section id="creaelimina-columnas-en-j" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Crea/elimina columnas en j</code></h2>
<ul>
<li>Piensa en términos básicos de unidades -
<p style="color: #5EDCDC;">
<strong>filas</strong>.
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>.
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>.
</p></li>
<li>Podemos usar DT[, variable:= valor] o set(DT, j=“variable”, valor=valor)</li>
</ul>

<img data-src="images/slide38.jpg" class="r-stretch"></section>
<section id="comparando-columnas-en-base-a-r-en-data.table" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Comparando columnas en base a R en data.table</code></h2>
<ul>
<li>En la columna denominada “mundo” establece el valor de “hola”</li>
<li>Es posible utilizar código base R con data.table.</li>
<li>Históricamente, := ha sido más eficiente en (tiempo/memoria)</li>
<li>Recientes versiones de R lo han mejorado enormemente!</li>
</ul>
<table>
<colgroup>
<col style="width: 12%">
<col style="width: 37%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Base código R</th>
<th>código data.table</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Literal</td>
<td>DF$mundo &lt;- “Hola”</td>
<td>DT[, mundo := “hola” ]</td>
</tr>
<tr class="even">
<td>Variable</td>
<td>DF[mi_var_nombre]] &lt;- “Hola”</td>
<td>set(DT,j=my_var_nombre, value=“Hola”)</td>
</tr>
</tbody>
</table>
</section>
<section id="crear-valor-en-las-columnas" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Crear valor en las columnas:=</code></h2>
<ul>
<li>DT[, variable := valor] puede usarse para crear nuevas columnas o actualizaciones.</li>
<li>Mismo efecto que DT$variable &lt;- valor, o DT[[“variable”]] &lt;- valor</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>mes.dt <span class="ot">&lt;-</span> vuelos[, .(mes, tiempo_vuelo, distancia)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">head</span>(mes.dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mes tiempo_vuelo distancia
   &lt;int&gt;        &lt;num&gt;     &lt;num&gt;
1:     1          227      1400
2:     1          227      1416
3:     1          160      1089
4:     1          183      1576
5:     1          116       762
6:     1          150       719</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>mes.dt[, aire_horas <span class="sc">:</span><span class="er">=</span> tiempo_vuelo<span class="sc">/</span><span class="dv">60</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="fu">head</span>(mes.dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mes tiempo_vuelo distancia aire_horas
   &lt;int&gt;        &lt;num&gt;     &lt;num&gt;      &lt;num&gt;
1:     1          227      1400   3.783333
2:     1          227      1416   3.783333
3:     1          160      1089   2.666667
4:     1          183      1576   3.050000
5:     1          116       762   1.933333
6:     1          150       719   2.500000</code></pre>
</div>
</div>
</section>
<section id="elimina-columnas-null" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Elimina columnas := NULL</code></h2>
<ul>
<li>DT[, variable :=NULL] elimina columnas</li>
<li>Todas := las operaciones son por referencias (eficiente)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="fu">head</span>(mes.dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mes tiempo_vuelo distancia aire_horas
   &lt;int&gt;        &lt;num&gt;     &lt;num&gt;      &lt;num&gt;
1:     1          227      1400   3.783333
2:     1          227      1416   3.783333
3:     1          160      1089   2.666667
4:     1          183      1576   3.050000
5:     1          116       762   1.933333
6:     1          150       719   2.500000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a>mes.dt[, tiempo_vuelo <span class="sc">:</span><span class="er">=</span> <span class="cn">NULL</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="fu">head</span>(mes.dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mes distancia aire_horas
   &lt;int&gt;     &lt;num&gt;      &lt;num&gt;
1:     1      1400   3.783333
2:     1      1416   3.783333
3:     1      1089   2.666667
4:     1      1576   3.050000
5:     1       762   1.933333
6:     1       719   2.500000</code></pre>
</div>
</div>
</section>
<section id="set-para-creareliminar-columnas" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>set() para crear/eliminar columnas</code></h2>
<ul>
<li>set(DT, j=“col_name”, value=col_val) es igual que DT[, col_name :=col_val]</li>
<li>Usualmente cuando los nombres de las columnas esta almacenado en una variable, como aquí:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>my_var_name <span class="ot">=</span> <span class="st">"nuevita"</span></span>
<span id="cb59-2"><a href="#cb59-2"></a><span class="fu">set</span>(vuelos, <span class="at">j=</span>my_var_name, <span class="at">value=</span><span class="st">"HOLA!"</span>)</span>
<span id="cb59-3"><a href="#cb59-3"></a>vuelos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Index: &lt;mes__origen&gt;
         anio   mes   dia horario_salida salida_programada atraso_salida
        &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
     1:  2013     1     1            517               515             2
     2:  2013     1     1            533               529             4
     3:  2013     1     1            542               540             2
     4:  2013     1     1            544               545            -1
     5:  2013     1     1            554               600            -6
    ---                                                                 
336772:  2013     9    30             NA              1455            NA
336773:  2013     9    30             NA              2200            NA
336774:  2013     9    30             NA              1210            NA
336775:  2013     9    30             NA              1159            NA
336776:  2013     9    30             NA               840            NA
        horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                  &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
     1:             830                819             11        UA  1545
     2:             850                830             20        UA  1714
     3:             923                850             33        AA  1141
     4:            1004               1022            -18        B6   725
     5:             812                837            -25        DL   461
    ---                                                                  
336772:              NA               1634             NA        9E  3393
336773:              NA               2312             NA        9E  3525
336774:              NA               1330             NA        MQ  3461
336775:              NA               1344             NA        MQ  3572
336776:              NA               1020             NA        MQ  3531
        codigo_cola origen destino tiempo_vuelo distancia  hora minuto
             &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
     1:      N14228    EWR     IAH          227      1400     5     15
     2:      N24211    LGA     IAH          227      1416     5     29
     3:      N619AA    JFK     MIA          160      1089     5     40
     4:      N804JB    JFK     BQN          183      1576     5     45
     5:      N668DN    LGA     ATL          116       762     6      0
    ---                                                               
336772:        &lt;NA&gt;    JFK     DCA           NA       213    14     55
336773:        &lt;NA&gt;    LGA     SYR           NA       198    22      0
336774:      N535MQ    LGA     BNA           NA       764    12     10
336775:      N511MQ    LGA     CLE           NA       419    11     59
336776:      N839MQ    LGA     RDU           NA       431     8     40
                 fecha_hora nuevita
                     &lt;POSc&gt;  &lt;char&gt;
     1: 2013-01-01 05:00:00   HOLA!
     2: 2013-01-01 05:00:00   HOLA!
     3: 2013-01-01 05:00:00   HOLA!
     4: 2013-01-01 05:00:00   HOLA!
     5: 2013-01-01 06:00:00   HOLA!
    ---                            
336772: 2013-09-30 14:00:00   HOLA!
336773: 2013-09-30 22:00:00   HOLA!
336774: 2013-09-30 12:00:00   HOLA!
336775: 2013-09-30 11:00:00   HOLA!
336776: 2013-09-30 08:00:00   HOLA!</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">set</span>(vuelos, <span class="at">j=</span>my_var_name, <span class="at">value=</span><span class="cn">NULL</span>)</span>
<span id="cb61-2"><a href="#cb61-2"></a>vuelos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Index: &lt;mes__origen&gt;
         anio   mes   dia horario_salida salida_programada atraso_salida
        &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
     1:  2013     1     1            517               515             2
     2:  2013     1     1            533               529             4
     3:  2013     1     1            542               540             2
     4:  2013     1     1            544               545            -1
     5:  2013     1     1            554               600            -6
    ---                                                                 
336772:  2013     9    30             NA              1455            NA
336773:  2013     9    30             NA              2200            NA
336774:  2013     9    30             NA              1210            NA
336775:  2013     9    30             NA              1159            NA
336776:  2013     9    30             NA               840            NA
        horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                  &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
     1:             830                819             11        UA  1545
     2:             850                830             20        UA  1714
     3:             923                850             33        AA  1141
     4:            1004               1022            -18        B6   725
     5:             812                837            -25        DL   461
    ---                                                                  
336772:              NA               1634             NA        9E  3393
336773:              NA               2312             NA        9E  3525
336774:              NA               1330             NA        MQ  3461
336775:              NA               1344             NA        MQ  3572
336776:              NA               1020             NA        MQ  3531
        codigo_cola origen destino tiempo_vuelo distancia  hora minuto
             &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
     1:      N14228    EWR     IAH          227      1400     5     15
     2:      N24211    LGA     IAH          227      1416     5     29
     3:      N619AA    JFK     MIA          160      1089     5     40
     4:      N804JB    JFK     BQN          183      1576     5     45
     5:      N668DN    LGA     ATL          116       762     6      0
    ---                                                               
336772:        &lt;NA&gt;    JFK     DCA           NA       213    14     55
336773:        &lt;NA&gt;    LGA     SYR           NA       198    22      0
336774:      N535MQ    LGA     BNA           NA       764    12     10
336775:      N511MQ    LGA     CLE           NA       419    11     59
336776:      N839MQ    LGA     RDU           NA       431     8     40
                 fecha_hora
                     &lt;POSc&gt;
     1: 2013-01-01 05:00:00
     2: 2013-01-01 05:00:00
     3: 2013-01-01 05:00:00
     4: 2013-01-01 05:00:00
     5: 2013-01-01 06:00:00
    ---                    
336772: 2013-09-30 14:00:00
336773: 2013-09-30 22:00:00
336774: 2013-09-30 12:00:00
336775: 2013-09-30 11:00:00
336776: 2013-09-30 08:00:00</code></pre>
</div>
</div>
</section>
<section id="ejercicios-2" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Ejercicios</code></h2>
<ul>
<li>Crea nuevas columnas aire_horas := tiempo_aire/60 como en las diapositivas previas.</li>
<li>Crea una nueva columna hora_llegada := + aire_horas</li>
<li>Usa vuelos[, range(horas)] para encontrar el rango normal de la variable hora.</li>
<li>Hace un subconjunto para encontrar cuantas filas tienen hora_llegada &gt; max(hora)</li>
<li>Crea una nueva variable dia_llegada con la cual sea “same” or “next” ifelse(hora_llegada&gt;max(hour), “next”, “same”)</li>
</ul>
</section>
<section id="computa-un-subconjunto-con-i-y-j" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Computa un subconjunto con i y j</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee un lugar para cada uno de ellos. <img data-src="images/page52.jpg"></li>
</ul>
</section>
<section id="resumiendo-un-subconjunto-de-filas" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Resumiendo un subconjunto de filas</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>vuelos[origen <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">&amp;</span> mes <span class="sc">==</span> 6L, <span class="fu">length</span>(destino)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9472</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a>vuelos[origen <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">&amp;</span> mes <span class="sc">==</span> 6L, .N]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9472</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>vuelos[origen <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">&amp;</span> mes <span class="sc">==</span> 6L, .(<span class="at">m_llegada=</span><span class="fu">mean</span>(atraso_llegada), <span class="at">num_vuelos=</span>.N)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   m_llegada num_vuelos
       &lt;num&gt;      &lt;int&gt;
1:        NA       9472</code></pre>
</div>
</div>
<ul>
<li>¿Cuántos viajes se realizaron desde el año 2014 desde el aeropuerto de “JFK” en el mes de junio y cual es el promedio de partidas y retraso en la llegada ?</li>
<li>Especial símbolo .N puede usarse en [] para tener los números de las filas.</li>
<li>Ejercicio: para todos los vuelos con positivas partidas, ¿Cuál fue el promedio <em>mean</em> de demora en los arribos?y ¿Para vuelos con negativas partidas?</li>
</ul>
</section>
<section id="actualización-de-columnas-con" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Actualización de columnas con:=</code></h2>
<ul>
<li>DT[ i , variable := value] se puede utilizar para actualizar filas que coinciden con i</li>
<li>set(DT, i= , j=“variable”, value= ) útil para programar</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a><span class="fu">head</span>(mes.dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mes distancia aire_horas
   &lt;int&gt;     &lt;num&gt;      &lt;num&gt;
1:     1      1400   3.783333
2:     1      1416   3.783333
3:     1      1089   2.666667
4:     1      1576   3.050000
5:     1       762   1.933333
6:     1       719   2.500000</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>mes.dt[distancia<span class="sc">&lt;</span><span class="dv">100</span>, aire_horas <span class="sc">:</span><span class="er">=</span> <span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a><span class="fu">head</span>(mes.dt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mes distancia aire_horas
   &lt;int&gt;     &lt;num&gt;      &lt;num&gt;
1:     1      1400   3.783333
2:     1      1416   3.783333
3:     1      1089   2.666667
4:     1      1576   3.050000
5:     1       762   1.933333
6:     1       719   2.500000</code></pre>
</div>
</div>
</section>
<section id="ejercicios-3" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Ejercicios</code></h2>
<ul>
<li>Continúa de previos ejercicios…</li>
<li>Crea nuevas columnas <code>horas_aire := tiempo_vuelo/60</code> como las diapositivas previas.</li>
<li>crea una nueva columna <code>horas_llegada := hora + horas_aire</code>.</li>
<li>Crea una nueva columna <code>dia_llegada</code> de la cual sea ambos iguales o siguientes <code>ifelse(horas_llegada&gt;max(hora), "next", "same")</code></li>
<li>Actualiza horas_llegada :=<code>horas_llegadas-24</code> para las filas con <code>horas_llegadas &gt; 24</code> .</li>
<li>Usa vuelos<code>[, range(horas_llegada)]</code> para confirmar el valor entre 0 y 24.</li>
</ul>
</section>
<section id="computa-por-c-grupo-con-j-y-by" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Computa por c/ grupo con j y by</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee un lugar para cada uno de ellos.</li>
</ul>

<img data-src="images/slide56.jpg" data-fig.align="center" class="r-stretch"></section>
<section id="resumiendo-por-cada-grupo" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Resumiendo por cada grupo</code></h2>
<ul>
<li><p>by=origen significa tratar a cada único valor de origen como un grupo.</p></li>
<li><p>Por cada grupo/origen, podemos computar el número de vuelos y el promedio <em>mean</em> de los arribos y partidas.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>vuelos[, .(<span class="at">num_vuelos=</span>.N), by<span class="ot">=</span>origen]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   origen num_vuelos
   &lt;char&gt;      &lt;int&gt;
1:    EWR     120835
2:    LGA     104662
3:    JFK     111279</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>vuelos[, .(<span class="at">num_vuelos=</span>.N, <span class="at">mean_retraso_llegada=</span><span class="fu">mean</span>(atraso_llegada)),</span>
<span id="cb76-2"><a href="#cb76-2"></a>        by<span class="ot">=</span>origen]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   origen num_vuelos mean_retraso_llegada
   &lt;char&gt;      &lt;int&gt;                &lt;num&gt;
1:    EWR     120835                   NA
2:    LGA     104662                   NA
3:    JFK     111279                   NA</code></pre>
</div>
</div>
</section>
<section id="resumiendo-por-cada-grupo-1" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Resumiendo por cada grupo</code></h2>
<ul>
<li>Muchas variables pueden especificarse vía <em>.() en by</em> lo que significa usar cada combinación única para todas las variables como un grupo.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a>vuelos[, .(<span class="at">num_vuelos=</span>.N, <span class="at">mean_retraso_llegada=</span><span class="fu">mean</span>(atraso_llegada)),</span>
<span id="cb78-2"><a href="#cb78-2"></a>        by<span class="ot">=</span>.(origen, destino)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     origen destino num_vuelos mean_retraso_llegada
     &lt;char&gt;  &lt;char&gt;      &lt;int&gt;                &lt;num&gt;
  1:    EWR     IAH       3973                   NA
  2:    LGA     IAH       2951                   NA
  3:    JFK     MIA       3314                   NA
  4:    JFK     BQN        599                   NA
  5:    LGA     ATL      10263                   NA
 ---                                               
220:    LGA     TVC         77                   NA
221:    LGA     MYR          3                 -3.0
222:    EWR     TVC         24                   NA
223:    EWR     ANC          8                 -2.5
224:    EWR     LGA          1                   NA</code></pre>
</div>
</div>
</section>
<section id="nuevo-byagrupando-variables" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Nuevo by/agrupando variables</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>vuelos[, .(</span>
<span id="cb80-2"><a href="#cb80-2"></a>  <span class="at">num_vuelos=</span>.N,</span>
<span id="cb80-3"><a href="#cb80-3"></a>  <span class="at">mean_retraso_llegada=</span><span class="fu">mean</span>(atraso_llegada)</span>
<span id="cb80-4"><a href="#cb80-4"></a>), by<span class="ot">=</span>.(</span>
<span id="cb80-5"><a href="#cb80-5"></a>  <span class="at">origen=</span><span class="fu">tolower</span>(origen),</span>
<span id="cb80-6"><a href="#cb80-6"></a>  <span class="at">destino.punt=</span>destino</span>
<span id="cb80-7"><a href="#cb80-7"></a>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     origen destino.punt num_vuelos mean_retraso_llegada
     &lt;char&gt;       &lt;char&gt;      &lt;int&gt;                &lt;num&gt;
  1:    ewr          IAH       3973                   NA
  2:    lga          IAH       2951                   NA
  3:    jfk          MIA       3314                   NA
  4:    jfk          BQN        599                   NA
  5:    lga          ATL      10263                   NA
 ---                                                    
220:    lga          TVC         77                   NA
221:    lga          MYR          3                 -3.0
222:    ewr          TVC         24                   NA
223:    ewr          ANC          8                 -2.5
224:    ewr          LGA          1                   NA</code></pre>
</div>
</div>
<ul>
<li>Las variables pueden renombrarse al computarse.</li>
<li>Ejercicio: para todos los vuelos con retraso de salida positiva o negativa cual fue el promedio <em>mean</em> de las demoras de los arribos? Ayuda: usa sign(retraso_ida) en by.</li>
</ul>
</section>
<section id="usando-los-tres-argumentos-juntos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Usando los tres argumentos juntos</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee un lugar para cada uno de ellos.</li>
</ul>

<img data-src="images/slide60.jpg" class="r-stretch"></section>
<section id="subconjunto-de-filas-antes-de-resumir" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Subconjunto de filas antes de resumir</code></h2>
<ul>
<li>i puede ser usada en el mismo tiempo que<code>j</code> y <code>by</code>.</li>
<li>Para el subconjunto de vuelos con AA como <strong>aerolinea</strong>, por cada origen y destino, obtén el número de vuelos, y el promedio <em>mean</em> de arribos demorados.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a>vuelos[aerolinea<span class="sc">==</span><span class="st">"AA"</span>, .(<span class="at">num_vuelos=</span>.N, <span class="at">mean_retraso_llegada=</span><span class="fu">mean</span>(atraso_llegada)), by<span class="ot">=</span>.(origen, destino)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    origen destino num_vuelos mean_retraso_llegada
    &lt;char&gt;  &lt;char&gt;      &lt;int&gt;                &lt;num&gt;
 1:    JFK     MIA       2221                   NA
 2:    LGA     ORD       5694                   NA
 3:    LGA     DFW       4836                   NA
 4:    EWR     MIA       1068                   NA
 5:    LGA     MIA       3945                   NA
 6:    JFK     SJU       1099                   NA
 7:    JFK     MCO        730                   NA
 8:    JFK     FLL        182                   NA
 9:    EWR     DFW       2054                   NA
10:    JFK     LAX       3217                   NA
11:    JFK     SFO       1422                   NA
12:    JFK     BOS       1455                   NA
13:    LGA     STL        902                   NA
14:    JFK     STT        303                   NA
15:    JFK     DFW        367                   NA
16:    JFK     EGE        103                   NA
17:    JFK     LAS        639                   NA
18:    JFK     AUS        365                   NA
19:    JFK     ORD        365                   NA
20:    JFK     SAN        365                   NA
21:    EWR     LAX        365                   NA
22:    JFK     SEA        365                   NA
23:    JFK     TPA        311                   NA
24:    JFK     IAH        274                   NA
25:    LGA     PBI         82                   NA
    origen destino num_vuelos mean_retraso_llegada</code></pre>
</div>
</div>
</section>
<section id="dti-dentro-de-j-con-by" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>DT[i] dentro de j con by</code></h2>
<ul>
<li><p>Para cada grupo, definido con un único valor de origen y destino, selecciona la primer fila, y las columnas tiempo_vuelo, distancia.</p></li>
<li><p>Ayuda: .() es sinónimo de list(), por lo que data.table() debe ser usado aquí.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a>vuelos[, <span class="fu">data.table</span>(tiempo_vuelo, distancia) [<span class="dv">1</span>] , by<span class="ot">=</span>.(origen,destino)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     origen destino tiempo_vuelo distancia
     &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt;
  1:    EWR     IAH          227      1400
  2:    LGA     IAH          227      1416
  3:    JFK     MIA          160      1089
  4:    JFK     BQN          183      1576
  5:    LGA     ATL          116       762
 ---                                      
220:    LGA     TVC          101       655
221:    LGA     MYR           74       563
222:    EWR     TVC           93       644
223:    EWR     ANC          418      3370
224:    EWR     LGA           NA        17</code></pre>
</div>
</div>
</section>
<section id="sdi-dentro-de-j-con-by" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>SD[i] dentro de j con by</code></h2>
<ul>
<li><p>Para cada grupo, definido de valores únicos de origen y destino, selecciona la primer fila, y todas las columnas.</p></li>
<li><p>Ayuda: .SD es un data.table; lo que significa <code>"subconjunto de datos"</code> para un grupo.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a>vuelos[, .SD[<span class="dv">1</span>], by<span class="ot">=</span>.(origen,destino)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     origen destino  anio   mes   dia horario_salida salida_programada
     &lt;char&gt;  &lt;char&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;
  1:    EWR     IAH  2013     1     1            517               515
  2:    LGA     IAH  2013     1     1            533               529
  3:    JFK     MIA  2013     1     1            542               540
  4:    JFK     BQN  2013     1     1            544               545
  5:    LGA     ATL  2013     1     1            554               600
 ---                                                                  
220:    LGA     TVC  2013     6    14           1756              1800
221:    LGA     MYR  2013     6    15           1517              1520
222:    EWR     TVC  2013     7     5           1355              1400
223:    EWR     ANC  2013     7     6           1629              1615
224:    EWR     LGA  2013     7    27             NA               106
     atraso_salida horario_llegada llegada_programada atraso_llegada aerolinea
             &lt;num&gt;           &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt;
  1:             2             830                819             11        UA
  2:             4             850                830             20        UA
  3:             2             923                850             33        AA
  4:            -1            1004               1022            -18        B6
  5:            -6             812                837            -25        DL
 ---                                                                          
220:            -4            2004               2005             -1        MQ
221:            -3            1656               1730            -34        EV
222:            -5            1550               1620            -30        EV
223:            14            1954               1953              1        UA
224:            NA              NA                245             NA        US
     vuelo codigo_cola tiempo_vuelo distancia  hora minuto          fecha_hora
     &lt;int&gt;      &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;              &lt;POSc&gt;
  1:  1545      N14228          227      1400     5     15 2013-01-01 05:00:00
  2:  1714      N24211          227      1416     5     29 2013-01-01 05:00:00
  3:  1141      N619AA          160      1089     5     40 2013-01-01 05:00:00
  4:   725      N804JB          183      1576     5     45 2013-01-01 05:00:00
  5:   461      N668DN          116       762     6      0 2013-01-01 06:00:00
 ---                                                                          
220:  3402      N722MQ          101       655    18      0 2013-06-14 18:00:00
221:  5163      N605QX           74       563    15     20 2013-06-15 15:00:00
222:  4137      N11164           93       644    14      0 2013-07-05 14:00:00
223:   887      N587UA          418      3370    16     15 2013-07-06 16:00:00
224:  1632        &lt;NA&gt;           NA        17     1      6 2013-07-27 01:00:00</code></pre>
</div>
</div>
</section>
<section id="sdi-dentro-de-j-con-by-1" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>.SD[i] dentro de j con by</code></h2>
<p><br>
<br>
- Ejercicio: por cada origen y destino, obtene la <strong>última fila</strong>.<br>
<br>
Ayuda: recordá que .N significa el número de filas en una tabla.</p>
<ul>
<li>Ejercicio: por cada origen y destino, obtené la <strong>primer y última fila</strong>.</li>
</ul>
</section>
<section id="escribir-y-leer-csv-en-pedazos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Escribir y leer CSV en pedazos</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee un lugar para cada uno.</li>
</ul>

<img data-src="images/slide56.jpg" class="r-stretch"></section>
<section id="fwrite---escribe-eficiente-csv" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>fwrite - escribe eficiente csv</code></h2>
<p>-Escribe el data set completo de vuelos a un disco.</p>
<p><strong>fwrite(vuelos, “vuelos.csv”)</strong></p>
</section>
<section id="dt-jfwrite-byvariable" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>DT[, j=fwrite(), by=variable]</code></h2>
<ul>
<li>Escribe una fila por mes, 1.csv, 2.csv, etc. -by= mes significa que en j, mes es escalable, por lo que paste0 ( mes, “.csv”) puede ser usado para crear 1.csv, 2.csv, etc.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a>vuelos[, <span class="fu">fwrite</span>(</span>
<span id="cb88-2"><a href="#cb88-2"></a>   <span class="fu">data.table</span>(tiempo_vuelo, distancia),</span>
<span id="cb88-3"><a href="#cb88-3"></a>   <span class="fu">paste0</span>(mes,<span class="st">".csv"</span>)</span>
<span id="cb88-4"><a href="#cb88-4"></a>   ), by<span class="ot">=</span>mes]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Empty data.table (0 rows and 1 cols): mes</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a> <span class="fu">Sys.glob</span>(<span class="st">"*.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1.csv"         "10.csv"        "11.csv"        "12.csv"       
 [5] "2.csv"         "3.csv"         "4.csv"         "5.csv"        
 [9] "6.csv"         "7.csv"         "8.csv"         "9.csv"        
[13] "flights14.csv"</code></pre>
</div>
</div>
</section>
<section id="fread-csv-combinado-con-rbindlist" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>fread CSV, combinado con rbindlist</code></h2>
<ul>
<li>(1)inicialmente lista vacía, (2) en cada iteración del bucle for, asigna una tabla con un elemento de la lista, (3) rbindlist para crear una tabla simple con todos los datos.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a>mes.dt.list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a><span class="co">#(2)</span></span>
<span id="cb93-2"><a href="#cb93-2"></a><span class="cf">for</span>(mes.csv <span class="cf">in</span> <span class="fu">Sys.glob</span>(<span class="st">"*.csv"</span>)){</span>
<span id="cb93-3"><a href="#cb93-3"></a>  mes<span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">".csv"</span>, <span class="st">""</span>, mes.csv)</span>
<span id="cb93-4"><a href="#cb93-4"></a>  mes.dt.list[[mes.csv]] <span class="ot">&lt;-</span> <span class="fu">data.table</span>(mes,<span class="fu">fread</span>(mes.csv))}</span>
<span id="cb93-5"><a href="#cb93-5"></a></span>
<span id="cb93-6"><a href="#cb93-6"></a><span class="co">#(3)  (mes.dt &lt;- data.table::rbindlist(mes.dt.list))         </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lee-muchos-csv-usando-by" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Lee muchos  CSV usando by</code></h2>
<ul>
<li>by=mes.csv significa computar <code>j=fread(mes.csv)</code> por cada único valor de mes.csv (por cada archivo CSV)</li>
<li>Los resultados están combinados vía <em>rbindlist</em> y se retornan como una tabla simple.<br>
</li>
</ul>
<p>**data.table(mes.csv=Sys.glob(“*.csv”)) [, fread(mes.csv) , by=mes.csv]**</p>
</section>
<section id="ejercicios-4" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Ejercicios</code></h2>
<p><br>
<br>
- Usa vuelos<code>[, fwrite(.SD), by=origen]</code>para escribir un archivo CSV para cada aeropuerto de Nueva York.</p>
<ul>
<li><p>Crea <code>CSV.dt</code>, a data.table de nombres de archivo CSV, usando Sys.glob(“*.csv”)</p></li>
<li><p>Usa <code>CSV.dt[, fread(origen.csv), by=origen.csv]</code> para leerlos de vuelta a R.</p></li>
</ul>
</section>
<section id="uniendo-cuando-i-es-un-data.table" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Uniendo: cuando i es un data.table</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee un lugar único para cada uno de ellos.</li>
</ul>

<img data-src="images/slide33.jpg" class="r-stretch"></section>
<section id="une-dt-con-la-tabla-i-dti" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Une DT con la tabla i: DT[i]</code></h2>
<ul>
<li>Retorna cada una de las filas en vuelos que coincida con una fila en tres dias,</li>
<li>con una fila NA al final del día que no coincida.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a>(tres_dias<span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb94-2"><a href="#cb94-2"></a>  <span class="fu">data.table</span>(<span class="at">mes=</span><span class="dv">3</span>, <span class="at">dia=</span><span class="dv">17</span>, <span class="at">evento=</span><span class="st">"St.Patrick"</span>),</span>
<span id="cb94-3"><a href="#cb94-3"></a>  <span class="fu">data.table</span>(<span class="at">mes=</span><span class="dv">9</span>, <span class="at">dia=</span><span class="dv">26</span>, <span class="at">evento=</span><span class="st">"Cumpleaños"</span>),</span>
<span id="cb94-4"><a href="#cb94-4"></a>  <span class="fu">data.table</span>(<span class="at">mes=</span><span class="dv">12</span>, <span class="at">dia=</span><span class="dv">25</span>, <span class="at">evento=</span><span class="st">"Navidad"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     mes   dia     evento
   &lt;num&gt; &lt;num&gt;     &lt;char&gt;
1:     3    17 St.Patrick
2:     9    26 Cumpleaños
3:    12    25    Navidad</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a>vuelos[tres_dias, on<span class="ot">=</span><span class="fu">c</span>(<span class="st">"mes"</span>,<span class="st">"dia"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       anio   mes   dia horario_salida salida_programada atraso_salida
      &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
   1:  2013     3    17             17              2253            84
   2:  2013     3    17             27              2358            29
   3:  2013     3    17             30              2355            35
   4:  2013     3    17             31              2359            32
   5:  2013     3    17             57              2100           237
  ---                                                                 
2618:  2013    12    25           2357              2359            -2
2619:  2013    12    25             NA              1630            NA
2620:  2013    12    25             NA              1525            NA
2621:  2013    12    25             NA              1100            NA
2622:  2013    12    25             NA              1930            NA
      horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
   1:             134                 14             80        B6   112
   2:             355                338             17        B6   707
   3:             405                340             25        B6   739
   4:             403                338             25        B6   727
   5:             321               2327            234        DL  1247
  ---                                                                  
2618:             433                437             -4        B6   839
2619:              NA               1838             NA        DL  2231
2620:              NA               1720             NA        MQ  2840
2621:              NA               1210             NA        MQ  3230
2622:              NA               2115             NA        MQ  3535
      codigo_cola origen destino tiempo_vuelo distancia  hora minuto
           &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
   1:      N583JB    JFK     BUF           56       301    22     53
   2:      N529JB    JFK     SJU          188      1598    23     58
   3:      N592JB    JFK     PSE          195      1617    23     55
   4:      N653JB    JFK     BQN          187      1576    23     59
   5:      N929DL    LGA     ATL          112       762    21      0
  ---                                                               
2618:      N784JB    JFK     BQN          194      1576    23     59
2619:      N312US    LGA     DTW           NA       502    16     30
2620:      N8EGMQ    LGA     STL           NA       888    15     25
2621:      N524MQ    JFK     DCA           NA       213    11      0
2622:      N509MQ    JFK     CMH           NA       483    19     30
               fecha_hora     evento
                   &lt;POSc&gt;     &lt;char&gt;
   1: 2013-03-17 22:00:00 St.Patrick
   2: 2013-03-17 23:00:00 St.Patrick
   3: 2013-03-17 23:00:00 St.Patrick
   4: 2013-03-17 23:00:00 St.Patrick
   5: 2013-03-17 21:00:00 St.Patrick
  ---                               
2618: 2013-12-25 23:00:00    Navidad
2619: 2013-12-25 16:00:00    Navidad
2620: 2013-12-25 15:00:00    Navidad
2621: 2013-12-25 11:00:00    Navidad
2622: 2013-12-25 19:00:00    Navidad</code></pre>
</div>
</div>
</section>
<section id="unir-dos-tablas-cmúltiples-argumentos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Unir dos tablas, c/múltiples argumentos</code></h2>
<ul>
<li><code>mult="all"</code> está por defecto. Es decir, retorna todas las filas que coincidan.</li>
<li>Al principio o al final hay otras opciones, retorna una fila por vuelo, para cada fila de los tres días.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a> vuelos[tres_dias, on<span class="ot">=</span><span class="fu">c</span>(<span class="st">"mes"</span>,<span class="st">"dia"</span>), mult<span class="ot">=</span><span class="st">"first"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    anio   mes   dia horario_salida salida_programada atraso_salida
   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
1:  2013     3    17             17              2253            84
2:  2013     9    26            451               500            -9
3:  2013    12    25            456               500            -4
   horario_llegada llegada_programada atraso_llegada aerolinea vuelo
             &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
1:             134                 14             80        B6   112
2:             619                648            -29        US  1877
3:             649                651             -2        US  1895
   codigo_cola origen destino tiempo_vuelo distancia  hora minuto
        &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
1:      N583JB    JFK     BUF           56       301    22     53
2:      N155UW    EWR     CLT           72       529     5      0
3:      N156UW    EWR     CLT           98       529     5      0
            fecha_hora     evento
                &lt;POSc&gt;     &lt;char&gt;
1: 2013-03-17 22:00:00 St.Patrick
2: 2013-09-26 05:00:00 Cumpleaños
3: 2013-12-25 05:00:00    Navidad</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a> vuelos[tres_dias, on<span class="ot">=</span><span class="fu">c</span>(<span class="st">"mes"</span>,<span class="st">"dia"</span>), mult<span class="ot">=</span><span class="st">"last"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    anio   mes   dia horario_salida salida_programada atraso_salida
   &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
1:  2013     3    17             NA               650            NA
2:  2013     9    26             NA              1240            NA
3:  2013    12    25             NA              1930            NA
   horario_llegada llegada_programada atraso_llegada aerolinea vuelo
             &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
1:              NA                827             NA        UA   883
2:              NA               1525             NA        WN  4720
3:              NA               2115             NA        MQ  3535
   codigo_cola origen destino tiempo_vuelo distancia  hora minuto
        &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
1:        &lt;NA&gt;    EWR     ORD           NA       719     6     50
2:      N691WN    EWR     HOU           NA      1411    12     40
3:      N509MQ    JFK     CMH           NA       483    19     30
            fecha_hora     evento
                &lt;POSc&gt;     &lt;char&gt;
1: 2013-03-17 06:00:00 St.Patrick
2: 2013-09-26 12:00:00 Cumpleaños
3: 2013-12-25 19:00:00    Navidad</code></pre>
</div>
</div>
</section>
<section id="uniendo-dos-tablas-sin-filas-na" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Uniendo dos tablas, sin filas NA</code></h2>
<ul>
<li><code>nomatch=0L</code> para retornar a 0 filas cuando no hay coincidencias. (en vez de 1 NA fila)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a> vuelos[tres_dias, on<span class="ot">=</span><span class="fu">c</span>(<span class="st">"mes"</span>,<span class="st">"dia"</span>), nomatch<span class="ot">=</span>0L]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       anio   mes   dia horario_salida salida_programada atraso_salida
      &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
   1:  2013     3    17             17              2253            84
   2:  2013     3    17             27              2358            29
   3:  2013     3    17             30              2355            35
   4:  2013     3    17             31              2359            32
   5:  2013     3    17             57              2100           237
  ---                                                                 
2618:  2013    12    25           2357              2359            -2
2619:  2013    12    25             NA              1630            NA
2620:  2013    12    25             NA              1525            NA
2621:  2013    12    25             NA              1100            NA
2622:  2013    12    25             NA              1930            NA
      horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
   1:             134                 14             80        B6   112
   2:             355                338             17        B6   707
   3:             405                340             25        B6   739
   4:             403                338             25        B6   727
   5:             321               2327            234        DL  1247
  ---                                                                  
2618:             433                437             -4        B6   839
2619:              NA               1838             NA        DL  2231
2620:              NA               1720             NA        MQ  2840
2621:              NA               1210             NA        MQ  3230
2622:              NA               2115             NA        MQ  3535
      codigo_cola origen destino tiempo_vuelo distancia  hora minuto
           &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
   1:      N583JB    JFK     BUF           56       301    22     53
   2:      N529JB    JFK     SJU          188      1598    23     58
   3:      N592JB    JFK     PSE          195      1617    23     55
   4:      N653JB    JFK     BQN          187      1576    23     59
   5:      N929DL    LGA     ATL          112       762    21      0
  ---                                                               
2618:      N784JB    JFK     BQN          194      1576    23     59
2619:      N312US    LGA     DTW           NA       502    16     30
2620:      N8EGMQ    LGA     STL           NA       888    15     25
2621:      N524MQ    JFK     DCA           NA       213    11      0
2622:      N509MQ    JFK     CMH           NA       483    19     30
               fecha_hora     evento
                   &lt;POSc&gt;     &lt;char&gt;
   1: 2013-03-17 22:00:00 St.Patrick
   2: 2013-03-17 23:00:00 St.Patrick
   3: 2013-03-17 23:00:00 St.Patrick
   4: 2013-03-17 23:00:00 St.Patrick
   5: 2013-03-17 21:00:00 St.Patrick
  ---                               
2618: 2013-12-25 23:00:00    Navidad
2619: 2013-12-25 16:00:00    Navidad
2620: 2013-12-25 15:00:00    Navidad
2621: 2013-12-25 11:00:00    Navidad
2622: 2013-12-25 19:00:00    Navidad</code></pre>
</div>
</div>
</section>
<section id="uniendo-dos-tablas-usando-setkey" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Uniendo dos tablas usando setkey</code></h2>
<ul>
<li><code>setkey(DT, col1, col2)</code>usa para ordenar DT por col1 y col2</li>
<li>Las uniones son rápidas, y no necesitan que se especifiquen con <code>on=</code>, si los datos ya tienen <code>key</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a> <span class="fu">setkey</span>(tres_dias, mes, dia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="fu">setkey</span>(vuelos, mes, dia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a>vuelos[tres_dias]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;mes, dia&gt;
       anio   mes   dia horario_salida salida_programada atraso_salida
      &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;         &lt;num&gt;
   1:  2013     3    17             17              2253            84
   2:  2013     3    17             27              2358            29
   3:  2013     3    17             30              2355            35
   4:  2013     3    17             31              2359            32
   5:  2013     3    17             57              2100           237
  ---                                                                 
2618:  2013    12    25           2357              2359            -2
2619:  2013    12    25             NA              1630            NA
2620:  2013    12    25             NA              1525            NA
2621:  2013    12    25             NA              1100            NA
2622:  2013    12    25             NA              1930            NA
      horario_llegada llegada_programada atraso_llegada aerolinea vuelo
                &lt;int&gt;              &lt;int&gt;          &lt;num&gt;    &lt;char&gt; &lt;int&gt;
   1:             134                 14             80        B6   112
   2:             355                338             17        B6   707
   3:             405                340             25        B6   739
   4:             403                338             25        B6   727
   5:             321               2327            234        DL  1247
  ---                                                                  
2618:             433                437             -4        B6   839
2619:              NA               1838             NA        DL  2231
2620:              NA               1720             NA        MQ  2840
2621:              NA               1210             NA        MQ  3230
2622:              NA               2115             NA        MQ  3535
      codigo_cola origen destino tiempo_vuelo distancia  hora minuto
           &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;  &lt;num&gt;
   1:      N583JB    JFK     BUF           56       301    22     53
   2:      N529JB    JFK     SJU          188      1598    23     58
   3:      N592JB    JFK     PSE          195      1617    23     55
   4:      N653JB    JFK     BQN          187      1576    23     59
   5:      N929DL    LGA     ATL          112       762    21      0
  ---                                                               
2618:      N784JB    JFK     BQN          194      1576    23     59
2619:      N312US    LGA     DTW           NA       502    16     30
2620:      N8EGMQ    LGA     STL           NA       888    15     25
2621:      N524MQ    JFK     DCA           NA       213    11      0
2622:      N509MQ    JFK     CMH           NA       483    19     30
               fecha_hora     evento
                   &lt;POSc&gt;     &lt;char&gt;
   1: 2013-03-17 22:00:00 St.Patrick
   2: 2013-03-17 23:00:00 St.Patrick
   3: 2013-03-17 23:00:00 St.Patrick
   4: 2013-03-17 23:00:00 St.Patrick
   5: 2013-03-17 21:00:00 St.Patrick
  ---                               
2618: 2013-12-25 23:00:00    Navidad
2619: 2013-12-25 16:00:00    Navidad
2620: 2013-12-25 15:00:00    Navidad
2621: 2013-12-25 11:00:00    Navidad
2622: 2013-12-25 19:00:00    Navidad</code></pre>
</div>
</div>
</section>
<section id="uniendo-dos-tablas-de-otra-forma" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Uniendo dos tablas de otra forma</code></h2>
<ul>
<li>Uniendo de otra manera siempre devuelve al menos una fila por cada vuelo, NA si no coincide.</li>
<li>Recuerda:<code>DT[i]</code> significa que retorna una fila por cada elemento en i.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a> (join.dt <span class="ot">&lt;-</span> tres_dias[vuelos, <span class="at">on=</span><span class="fu">c</span>(<span class="st">"mes"</span>,<span class="st">"dia"</span>)][<span class="fu">order</span>(<span class="fu">is.na</span>(evento))])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          mes   dia     evento  anio horario_salida salida_programada
        &lt;int&gt; &lt;int&gt;     &lt;char&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;
     1:     3    17 St.Patrick  2013             17              2253
     2:     3    17 St.Patrick  2013             27              2358
     3:     3    17 St.Patrick  2013             30              2355
     4:     3    17 St.Patrick  2013             31              2359
     5:     3    17 St.Patrick  2013             57              2100
    ---                                                              
336772:    12    31       &lt;NA&gt;  2013             NA               705
336773:    12    31       &lt;NA&gt;  2013             NA               825
336774:    12    31       &lt;NA&gt;  2013             NA              1615
336775:    12    31       &lt;NA&gt;  2013             NA               600
336776:    12    31       &lt;NA&gt;  2013             NA               830
        atraso_salida horario_llegada llegada_programada atraso_llegada
                &lt;num&gt;           &lt;int&gt;              &lt;int&gt;          &lt;num&gt;
     1:            84             134                 14             80
     2:            29             355                338             17
     3:            35             405                340             25
     4:            32             403                338             25
     5:           237             321               2327            234
    ---                                                                
336772:            NA              NA                931             NA
336773:            NA              NA               1029             NA
336774:            NA              NA               1800             NA
336775:            NA              NA                735             NA
336776:            NA              NA               1154             NA
        aerolinea vuelo codigo_cola origen destino tiempo_vuelo distancia  hora
           &lt;char&gt; &lt;int&gt;      &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt;     &lt;num&gt; &lt;num&gt;
     1:        B6   112      N583JB    JFK     BUF           56       301    22
     2:        B6   707      N529JB    JFK     SJU          188      1598    23
     3:        B6   739      N592JB    JFK     PSE          195      1617    23
     4:        B6   727      N653JB    JFK     BQN          187      1576    23
     5:        DL  1247      N929DL    LGA     ATL          112       762    21
    ---                                                                        
336772:        UA  1729        &lt;NA&gt;    EWR     DEN           NA      1605     7
336773:        US  1831        &lt;NA&gt;    JFK     CLT           NA       541     8
336774:        MQ  3301      N844MQ    LGA     RDU           NA       431    16
336775:        UA   219        &lt;NA&gt;    EWR     ORD           NA       719     6
336776:        UA   443        &lt;NA&gt;    JFK     LAX           NA      2475     8
        minuto          fecha_hora
         &lt;num&gt;              &lt;POSc&gt;
     1:     53 2013-03-17 22:00:00
     2:     58 2013-03-17 23:00:00
     3:     55 2013-03-17 23:00:00
     4:     59 2013-03-17 23:00:00
     5:      0 2013-03-17 21:00:00
    ---                           
336772:      5 2013-12-31 07:00:00
336773:     25 2013-12-31 08:00:00
336774:     15 2013-12-31 16:00:00
336775:      0 2013-12-31 06:00:00
336776:     30 2013-12-31 08:00:00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a> <span class="fu">table</span>(join.dt<span class="sc">$</span>evento, <span class="at">useNA=</span><span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Cumpleaños    Navidad St.Patrick       &lt;NA&gt; 
       996        719        907     334154 </code></pre>
</div>
</div>
</section>
<section id="ejercicios-5" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Ejercicios</code></h2>
<ul>
<li><h2 id="crea-una-tabla-de-datos-de-aeropuertos-de-la-siguiente-forma">Crea una tabla de datos de aeropuertos de la siguiente forma:</h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>codigo</th>
<th>nombre</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>JFK</td>
<td>kennedy</td>
</tr>
<tr class="even">
<td>2</td>
<td>LGA</td>
<td>Laguardia</td>
</tr>
<tr class="odd">
<td>3</td>
<td>EWR</td>
<td>Newark</td>
</tr>
</tbody>
</table></li>
<li>Une usando vuelos[airports, <code>on=.(origen=codigo)]</code> que significa unir para unirse a la columna de origen en vuelos con el código columnas en aeropuertos.</li>
</ul>
</section>
<section id="cómo-computar-un-histograma-de-las-distancias" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Cómo computar un histograma de las distancias</code></h2>
<ul>
<li>o <em>mean</em> por cada distancia (0,1000, 2000, etc) <img data-src="images/slide78.jpg"></li>
</ul>
</section>
<section id="define-los-contenedores-del-histograma" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Define los contenedores del histograma</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a>grid.point <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">5000</span>, <span class="at">by=</span><span class="dv">1000</span>)</span>
<span id="cb112-2"><a href="#cb112-2"></a>grid.dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(grid.point, <span class="at">distancia=</span>grid.point)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="images/slide79.jpg" class="r-stretch"></section>
<section id="rolling-join-rollinf" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Rolling join, roll=Inf</code></h2>
<ul>
<li>Cada punto de la cuadrícula coincide con los vuelos que ocurren después.</li>
</ul>
<div class="column smaller" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a><span class="fu">setkey</span>(grid.dt, distancia)</span>
<span id="cb113-2"><a href="#cb113-2"></a><span class="fu">setkey</span>(vuelos, distancia)</span>
<span id="cb113-3"><a href="#cb113-3"></a>(join.dt <span class="ot">&lt;-</span> grid.dt[vuelos, <span class="at">roll=</span><span class="cn">Inf</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;distancia&gt;
        grid.point distancia  anio   mes   dia horario_salida salida_programada
             &lt;num&gt;     &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;
     1:          0        17  2013     7    27             NA               106
     2:          0        80  2013     1     3           2127              2129
     3:          0        80  2013     1     4           1240              1200
     4:          0        80  2013     1     4           1829              1615
     5:          0        80  2013     1     4           2128              2129
    ---                                                                        
336772:       4000      4983  2013    12    27            922               930
336773:       4000      4983  2013    12    28            933               930
336774:       4000      4983  2013    12    29            920               930
336775:       4000      4983  2013    12    30            923               930
336776:       4000      4983  2013    12    31            922               930
        atraso_salida horario_llegada llegada_programada atraso_llegada
                &lt;num&gt;           &lt;int&gt;              &lt;int&gt;          &lt;num&gt;
     1:            NA              NA                245             NA
     2:            -2            2222               2224             -2
     3:            40            1333               1306             27
     4:           134            1937               1721            136
     5:            -1            2218               2224             -6
    ---                                                                
336772:            -8            1513               1535            -22
336773:             3            1520               1535            -15
336774:           -10            1513               1535            -22
336775:            -7            1536               1535              1
336776:            -8            1537               1535              2
        aerolinea vuelo codigo_cola origen destino tiempo_vuelo  hora minuto
           &lt;char&gt; &lt;int&gt;      &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt; &lt;num&gt;  &lt;num&gt;
     1:        US  1632        &lt;NA&gt;    EWR     LGA           NA     1      6
     2:        EV  3833      N13989    EWR     PHL           30    21     29
     3:        EV  4193      N14972    EWR     PHL           30    12      0
     4:        EV  4502      N15983    EWR     PHL           28    16     15
     5:        EV  4645      N27962    EWR     PHL           32    21     29
    ---                                                                     
336772:        HA    51      N395HA    JFK     HNL          633     9     30
336773:        HA    51      N384HA    JFK     HNL          633     9     30
336774:        HA    51      N383HA    JFK     HNL          631     9     30
336775:        HA    51      N393HA    JFK     HNL          644     9     30
336776:        HA    51      N395HA    JFK     HNL          655     9     30
                 fecha_hora
                     &lt;POSc&gt;
     1: 2013-07-27 01:00:00
     2: 2013-01-03 21:00:00
     3: 2013-01-04 12:00:00
     4: 2013-01-04 16:00:00
     5: 2013-01-04 21:00:00
    ---                    
336772: 2013-12-27 09:00:00
336773: 2013-12-28 09:00:00
336774: 2013-12-29 09:00:00
336775: 2013-12-30 09:00:00
336776: 2013-12-31 09:00:00</code></pre>
</div>
</div>
</div>
<div class="column smaller" style="width:40%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/slide801.jpg"></p>
</figure>
</div>
</div>
</section>
<section id="rolling-join-roll-inf" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Rolling join, roll=-Inf</code></h2>
<ul>
<li>Cada punto de la cuadrícula coincide con los vuelos que ocurren antes.</li>
</ul>
<div class="column smaller" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a> <span class="fu">setkey</span>(grid.dt, distancia)</span>
<span id="cb115-2"><a href="#cb115-2"></a> <span class="fu">setkey</span>(vuelos, distancia)</span>
<span id="cb115-3"><a href="#cb115-3"></a> (join.dt <span class="ot">&lt;-</span> grid.dt[vuelos, <span class="at">roll=</span><span class="sc">-</span><span class="cn">Inf</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;distancia&gt;
        grid.point distancia  anio   mes   dia horario_salida salida_programada
             &lt;num&gt;     &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;
     1:       1000        17  2013     7    27             NA               106
     2:       1000        80  2013     1     3           2127              2129
     3:       1000        80  2013     1     4           1240              1200
     4:       1000        80  2013     1     4           1829              1615
     5:       1000        80  2013     1     4           2128              2129
    ---                                                                        
336772:       5000      4983  2013    12    27            922               930
336773:       5000      4983  2013    12    28            933               930
336774:       5000      4983  2013    12    29            920               930
336775:       5000      4983  2013    12    30            923               930
336776:       5000      4983  2013    12    31            922               930
        atraso_salida horario_llegada llegada_programada atraso_llegada
                &lt;num&gt;           &lt;int&gt;              &lt;int&gt;          &lt;num&gt;
     1:            NA              NA                245             NA
     2:            -2            2222               2224             -2
     3:            40            1333               1306             27
     4:           134            1937               1721            136
     5:            -1            2218               2224             -6
    ---                                                                
336772:            -8            1513               1535            -22
336773:             3            1520               1535            -15
336774:           -10            1513               1535            -22
336775:            -7            1536               1535              1
336776:            -8            1537               1535              2
        aerolinea vuelo codigo_cola origen destino tiempo_vuelo  hora minuto
           &lt;char&gt; &lt;int&gt;      &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt; &lt;num&gt;  &lt;num&gt;
     1:        US  1632        &lt;NA&gt;    EWR     LGA           NA     1      6
     2:        EV  3833      N13989    EWR     PHL           30    21     29
     3:        EV  4193      N14972    EWR     PHL           30    12      0
     4:        EV  4502      N15983    EWR     PHL           28    16     15
     5:        EV  4645      N27962    EWR     PHL           32    21     29
    ---                                                                     
336772:        HA    51      N395HA    JFK     HNL          633     9     30
336773:        HA    51      N384HA    JFK     HNL          633     9     30
336774:        HA    51      N383HA    JFK     HNL          631     9     30
336775:        HA    51      N393HA    JFK     HNL          644     9     30
336776:        HA    51      N395HA    JFK     HNL          655     9     30
                 fecha_hora
                     &lt;POSc&gt;
     1: 2013-07-27 01:00:00
     2: 2013-01-03 21:00:00
     3: 2013-01-04 12:00:00
     4: 2013-01-04 16:00:00
     5: 2013-01-04 21:00:00
    ---                    
336772: 2013-12-27 09:00:00
336773: 2013-12-28 09:00:00
336774: 2013-12-29 09:00:00
336775: 2013-12-30 09:00:00
336776: 2013-12-31 09:00:00</code></pre>
</div>
</div>
</div>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide81.jpg"></p>
</div>
</section>
<section id="rolling-join-rollnearest" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Rolling join, roll="nearest"</code></h2>
<ul>
<li>Cada punto de la cuadrícula coincide con los vuelos que ocurren más cerca.</li>
</ul>
<div class="column smaller" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1"></a><span class="fu">setkey</span>(grid.dt, distancia)</span>
<span id="cb117-2"><a href="#cb117-2"></a><span class="fu">setkey</span>(vuelos, distancia)</span>
<span id="cb117-3"><a href="#cb117-3"></a>(join.dt <span class="ot">&lt;-</span> grid.dt[vuelos, <span class="at">roll=</span><span class="st">"nearest"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;distancia&gt;
        grid.point distancia  anio   mes   dia horario_salida salida_programada
             &lt;num&gt;     &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;          &lt;int&gt;             &lt;int&gt;
     1:          0        17  2013     7    27             NA               106
     2:          0        80  2013     1     3           2127              2129
     3:          0        80  2013     1     4           1240              1200
     4:          0        80  2013     1     4           1829              1615
     5:          0        80  2013     1     4           2128              2129
    ---                                                                        
336772:       5000      4983  2013    12    27            922               930
336773:       5000      4983  2013    12    28            933               930
336774:       5000      4983  2013    12    29            920               930
336775:       5000      4983  2013    12    30            923               930
336776:       5000      4983  2013    12    31            922               930
        atraso_salida horario_llegada llegada_programada atraso_llegada
                &lt;num&gt;           &lt;int&gt;              &lt;int&gt;          &lt;num&gt;
     1:            NA              NA                245             NA
     2:            -2            2222               2224             -2
     3:            40            1333               1306             27
     4:           134            1937               1721            136
     5:            -1            2218               2224             -6
    ---                                                                
336772:            -8            1513               1535            -22
336773:             3            1520               1535            -15
336774:           -10            1513               1535            -22
336775:            -7            1536               1535              1
336776:            -8            1537               1535              2
        aerolinea vuelo codigo_cola origen destino tiempo_vuelo  hora minuto
           &lt;char&gt; &lt;int&gt;      &lt;char&gt; &lt;char&gt;  &lt;char&gt;        &lt;num&gt; &lt;num&gt;  &lt;num&gt;
     1:        US  1632        &lt;NA&gt;    EWR     LGA           NA     1      6
     2:        EV  3833      N13989    EWR     PHL           30    21     29
     3:        EV  4193      N14972    EWR     PHL           30    12      0
     4:        EV  4502      N15983    EWR     PHL           28    16     15
     5:        EV  4645      N27962    EWR     PHL           32    21     29
    ---                                                                     
336772:        HA    51      N395HA    JFK     HNL          633     9     30
336773:        HA    51      N384HA    JFK     HNL          633     9     30
336774:        HA    51      N383HA    JFK     HNL          631     9     30
336775:        HA    51      N393HA    JFK     HNL          644     9     30
336776:        HA    51      N395HA    JFK     HNL          655     9     30
                 fecha_hora
                     &lt;POSc&gt;
     1: 2013-07-27 01:00:00
     2: 2013-01-03 21:00:00
     3: 2013-01-04 12:00:00
     4: 2013-01-04 16:00:00
     5: 2013-01-04 21:00:00
    ---                    
336772: 2013-12-27 09:00:00
336773: 2013-12-28 09:00:00
336774: 2013-12-29 09:00:00
336775: 2013-12-30 09:00:00
336776: 2013-12-31 09:00:00</code></pre>
</div>
</div>
</div>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide82.jpg"></p>
</div>
</section>
<section id="resumiendo-después-de-rolling-join" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Resumiendo después de: rolling join</code></h2>
<ul>
<li>¿ Cómo computar un resumen/histograma?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a>join.dt[, .(<span class="at">num_vuelos=</span>.N, <span class="at">mean_minutes=</span><span class="fu">mean</span>(tiempo_vuelo)), by<span class="ot">=</span>grid.point]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   grid.point num_vuelos mean_minutes
        &lt;num&gt;      &lt;int&gt;        &lt;num&gt;
1:          0      80327           NA
2:       1000     183736           NA
3:       2000      57742           NA
4:       3000      14264           NA
5:       5000        707           NA</code></pre>
</div>
</div>

<img data-src="images/slide83.jpg" class="r-stretch quarto-figure-center"></section>
<section id="no-igualdades-une-con-on.dtcol-icol" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>No-igualdades une con on=.(DTcol &lt; icol)</code></h2>
<div class="column smaller" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a> (rect.dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb121-2"><a href="#cb121-2"></a>   grid.point, </span>
<span id="cb121-3"><a href="#cb121-3"></a>   <span class="at">min_dist=</span>grid.point<span class="dv">-200</span>, </span>
<span id="cb121-4"><a href="#cb121-4"></a>   <span class="at">max_dist=</span>grid.point<span class="sc">+</span><span class="dv">400</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   grid.point min_dist max_dist
        &lt;num&gt;    &lt;num&gt;    &lt;num&gt;
1:          0     -200      400
2:       1000      800     1400
3:       2000     1800     2400
4:       3000     2800     3400
5:       4000     3800     4400
6:       5000     4800     5400</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a> <span class="fu">head</span>(join.dt <span class="ot">&lt;-</span> rect.dt[vuelos, .(</span>
<span id="cb123-2"><a href="#cb123-2"></a>   distancia, tiempo_vuelo, grid.point</span>
<span id="cb123-3"><a href="#cb123-3"></a>   ), <span class="at">on=</span>.(</span>
<span id="cb123-4"><a href="#cb123-4"></a>     min_dist<span class="sc">&lt;</span>distancia, max_dist<span class="sc">&gt;</span>distancia)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   distancia tiempo_vuelo grid.point
       &lt;num&gt;        &lt;num&gt;      &lt;num&gt;
1:        17           NA          0
2:        80           30          0
3:        80           30          0
4:        80           28          0
5:        80           32          0
6:        80           29          0</code></pre>
</div>
</div>
</div>
<div class="column smaller" style="width:40%;">
<p><img data-src="images/slide84.jpg" data-fig-align="center"> Une todas las filas que satisfacen las desigualdades dadas.</p>
</div>
</section>
<section id="computa-por-cada-fila-en-la-tabla-i" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Computa por cada fila en la tabla i</code></h2>
<ul>
<li>Piensa en términos básicos de unidades
<p style="color: #5EDCDC;">
<strong>filas</strong>
</p>
<p style="color: #5E99DC;">
<strong>columnas</strong>
</p>
<p style="color: #E9DF6E;">
<strong>grupo</strong>
</p></li>
<li>La sintaxis de data.table provee un lugar único para cada uno de ellos.</li>
</ul>

<img data-src="images/slide85.jpg" class="r-stretch"></section>
<section id="resumir-uniendo-via-by.eachi" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Resumir uniendo via by=.EACHI</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>vuelos[tres_dias, .(</span>
<span id="cb125-2"><a href="#cb125-2"></a>  <span class="at">mean_aire_time=</span><span class="fu">mean</span>(tiempo_vuelo),</span>
<span id="cb125-3"><a href="#cb125-3"></a>  <span class="at">num_vuelos=</span>.N</span>
<span id="cb125-4"><a href="#cb125-4"></a>  ), by<span class="ot">=</span>.EACHI, on<span class="ot">=</span>.(mes,dia)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;mes, dia&gt;
     mes   dia mean_aire_time num_vuelos
   &lt;int&gt; &lt;int&gt;          &lt;num&gt;      &lt;int&gt;
1:     3    17             NA        907
2:     9    26             NA        996
3:    12    25             NA        719</code></pre>
</div>
</div>
<ul>
<li><p><code>DT[ i, j, by=.EACHI, on]</code> significa que por cada fila en i, miramos las filas en DT la cual coinciden usando en columnas, y computar/retornando j.</p></li>
<li><p>No es lo mismo que <code>by=</code>(mes,día) la cual hace el cómputo por cada combinación única de mes y día (mucho menos eficiente si solo quisiéramos el resultado para unas pocas combinaciones)</p></li>
</ul>
</section>
<section id="remodelación-de-datos-ancho-a-largo-melt" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Remodelación de datos: ancho a largo (melt)</code></h2>

<img data-src="images/slide87.jpg" class="r-stretch"><p>Similar a stats::reshape(dirección=“long”), tidyr::pivot_longer()</p>
</section>
<section id="melt-remodelación-de-datos-de-ancho-a-largo" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt: remodelación de datos de ancho a largo</code></h2>
<ul>
<li>¿ Cómo hacer el gráfico de abajo con datos de flores?</li>
<li>La tabla de datos flores tiene columnas Largo.Sepalo, Ancho.Sepalo, Largo.Petalo, Ancho.Petalo, Especie.</li>
<li>Necesitaríamos <code>facet_grid(part ~ dim) + geom_histogram(aes(cm, fill=Especie))</code>,</li>
<li>Donde la columna dim tiene valores Largo o Ancho, parte de los valores son Petalo o Sepalo</li>
</ul>

<img data-src="images/slide88.jpg" class="r-stretch quarto-figure-center"><div class="footer">
<p>ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. R Journal (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="meltremodelación-de-ancho-a-largo-de-los-datos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt:remodelación de ancho a largo de los datos</code></h2>
<p><strong>melt(DT,id.vars =c(“especie”,“flores))</strong></p>
<p>Tipo de col.&nbsp;Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<p>Convertir 4 entradas de medidas para 1 columna de salida y 1 columna variable de salida</p>
<div class="footer">
<p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. R Journal (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-remodelación-de-ancho-a-largo-de-los-datos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt: remodelación de ancho a largo de los datos</code></h2>
<p><strong>melt(DT,measure.vars=c(“Largo.Sepalo”,“Ancho.Sepalo”,Largo.Petalo”,“Ancho.Petalo))</strong></p>
<p>Tipo de col.Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<p>Convertir 4 entradas de medidas para 1 columna de salida y 1 columna variable de salida</p>
<div class="footer">
<p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. R Journal (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-remodelación-de-ancho-a-largo-de-los-datos-1" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt: remodelación de ancho a largo de los datos</code></h2>
<p><strong>melt(DT,measure.vars=patterns(“.<em>[.].</em>”))</strong></p>
<p>Tipo de col.Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<p>Convertir 4 entradas de medidas para 1 columna de salida y 1 columna variable de salida</p>
<div class="footer">
<p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. R Journal (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-remodelación-en-largos-datos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt: remodelación en largos datos</code></h2>

<img data-src="images/slide92.jpg" class="r-stretch"><ul>
<li>Ejercicio: <code>melt</code> las columnas atraso_llegada y atraso_salida de los datos de vuelos,especificando las medidas como <code>measure.vars</code></li>
<li>Adicionalmente especifica <code>id.vars</code> que limita con las columnas y hace copia de la salida<em>output</em>.</li>
</ul>
<div class="footer">
<p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. <embed data-src="https://journal.r-project.org/archive/2021/RJ-2021-029/index.html"> (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-con-measure-nuevo-en-github" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt con measure( ), nuevo en GitHub</code></h2>
<p>**melt(DT, meassure.vars=measure(part,dim,pattern=“(.*)<a href=".*">.</a>“))**<br>
Tipo de col.Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<p>Convertir 4 entradas de medidas para 1 columna de salida y 1 columna variable de salida</p>
<div class="footer">
<p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. R Journal (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-con-measure-nuevo-en-github-1" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt con measure( ), nuevo en GitHub</code></h2>
<p>**melt(DT, measure.vars=measure(part,dim,pattern=(.*)<a href=".*">.</a>“))**</p>
<p>Tipo de col.Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<div class="footer">
<p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. R Journal (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-con-measurenuevo-en-github" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt con measure(),nuevo en GitHub</code></h2>
<p><code>melt(DT,measure.vars=measure(part,dim,sep=".")</code><br>
Usos de columna de entradas con mas grupos después de reachicar(2 en este caso)<br>
Tipo de col.Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<p>Convertir 4 entradas de medidas para 1 columna de salida y 1 columna variable de salida</p>
</section>
<section id="melt-con-measurenuevo-en-github-1" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt con measure(),nuevo en GitHub</code></h2>
<ul>
<li>Ejercicio: hace un gráfico con los datos de flores.</li>
<li>Primero convierte flores en un data.table, luego reacomoda la forma usando <code>melt(DT, measure=measure(-----------), value.name="cm")</code></li>
</ul>

<img data-src="images/slide96.jpg" class="r-stretch"><p>library(ggplot2); ggplot() + facet_grid(part ~ dim) + geom_histogram(aes(cm, fill=Especie), data=output_of_melt)</p>
</section>
<section id="melt-con-measure-nueva-en-github" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt con measure(), nueva en GitHub</code></h2>
<p><strong>melt(DT, measure.vars=measure(part, value.name, sep=“.”))</strong><br>
</p>
<p>Tipo de col.Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<p>Salida del valor de la columna por cada <strong>dim</strong>, y columna variable por parte.</p>
<div class="footer">
<p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. R Journal (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-con-measure-nuevo-en-github-2" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt con measure(), nuevo en GitHub</code></h2>
<p><strong>melt(DT, measure.vars=measure(value.name, dim, sep=“.”))</strong><br>
</p>
<p>Tipo de col.Leyenda:<code>|Nombre</code>| = medida/valor, <code>|Nombre|</code> = variable, <code>|Nombre|</code> = id</p>
<table>
<colgroup>
<col style="width: 3%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th>—</th>
<th>Largo.Sepalo</th>
<th>Ancho.Sepalo</th>
<th>Largo.Petalo</th>
<th>Ancho.Petalo</th>
<th>Especie flores</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>3.5</td>
<td>1.4</td>
<td>0.2</td>
<td>setosa 1</td>
</tr>
<tr class="even">
<td>2:</td>
<td>7.0</td>
<td>3.2</td>
<td>4.7</td>
<td>1.4</td>
<td>versicolor 51</td>
</tr>
</tbody>
</table>
<p><strong>Amplia entrada con 4 columnas de medidas</strong><br>
<code>Largo con 1 columna de valor</code></p>
<div class="column smaller" style="width:70%;">
<table>
<thead>
<tr class="header">
<th></th>
<th>valor</th>
<th>especie</th>
<th>flores</th>
<th>variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1:</td>
<td>5.1</td>
<td>setosa</td>
<td>1</td>
<td>Largo.Sepalo</td>
</tr>
<tr class="even">
<td>2:</td>
<td>3.5</td>
<td>setosa</td>
<td>1</td>
<td>Ancho.Sepalo</td>
</tr>
</tbody>
</table>
</div>
<p>Salida del valor de la columna por cada <strong>part</strong>, y columna variable por dim.</p>
<div class="footer">
<p>ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. <embed data-src="https://journal.r-project.org/archive/2021/RJ-2021-029/index.html"> (2021), doi:10.32614/RJ-2021-029</p>
</div>
</section>
<section id="melt-con-medida-nueva-en-github" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt con medida (), nueva en GitHub</code></h2>
<ul>
<li><p>Ejercicio: para mostrar que sepalo es más larga que petalo, hace un gráfico con los datos flores. Primero convertí flores en data.table.</p></li>
<li><p>Luego usa melt con measure() para reajustar.</p></li>
<li><p>library(ggplot2); ggplot() + facet_grid(.~dim) + geom_point(aes( Petalo, Sepalo, color=Especie), data=output_of_melt)+ geom_abline( slope=1, intercept=0)</p></li>
</ul>

<img data-src="images/slide98.jpg" class="r-stretch"><p>Ejemplos de fusión adaptados de: Hocking TD. Datos de ancho a alto remodelar usando expresiones regulares y el nc paquete. <embed data-src="https://journal.r-project.org/archive/2021/RJ-2021-029/index.html"> (2021), doi:10.32614/RJ-2021-029</p>
</section>
<section id="melt-ejercicios-para-los-datos-de-vuelos" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>melt ejercicios para los datos de vuelos</code></h2>
<ul>
<li>Ejercicio: hace un gráfico abajo con los datos de vuelos.</li>
<li>Usa melt con ambos patterns() o measure() para readaptar la forma.</li>
<li>ggplot() + geom_histogram(aes(demora_minutos, fill=variable), data=output_of_melt)</li>
</ul>

<img data-src="images/slide99.jpg" class="r-stretch"></section>
<section id="reajustando-datos-larga-forma-dcast" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Reajustando datos: larga forma (dcast)</code></h2>
<p><img data-src="images/slide100.jpg"> similar a stats::reshape(direction=“wide”), tidyr::pivot_wider()</p>
</section>
<section id="dcast-reajuste-de-largas-formas" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>dcast: reajuste de largas formas</code></h2>
<ul>
<li><code>dcast</code> puede obtener la versión original del datos de flores volviendo de la versión grande.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a>flores.dt<span class="ot">=</span><span class="fu">data.table</span>(flores)[, flores <span class="sc">:</span><span class="er">=</span> .I] <span class="co"># es decir número de fila en data.table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1"></a>flores.largo<span class="ot">=</span><span class="fu">melt</span>(flores.dt,<span class="at">measure=</span><span class="fu">measure</span>(part,dim,<span class="at">sep=</span><span class="st">"."</span>))</span>
<span id="cb128-2"><a href="#cb128-2"></a><span class="fu">head</span>(flores.largo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Especie flores   part    dim value
    &lt;fctr&gt;  &lt;int&gt; &lt;char&gt; &lt;char&gt; &lt;num&gt;
1:  setosa      1  Largo Sepalo   5.1
2:  setosa      2  Largo Sepalo   4.9
3:  setosa      3  Largo Sepalo   4.7
4:  setosa      4  Largo Sepalo   4.6
5:  setosa      5  Largo Sepalo   5.0
6:  setosa      6  Largo Sepalo   5.4</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1"></a><span class="co"># La formula indica donde esta puesto los diferentes valores de la variable: rows #~ cols</span></span>
<span id="cb130-2"><a href="#cb130-2"></a></span>
<span id="cb130-3"><a href="#cb130-3"></a>flores.ancho<span class="ot">=</span><span class="fu">dcast</span>(flores.largo, flores <span class="sc">~</span> part <span class="sc">+</span> dim, <span class="at">sep=</span><span class="st">"."</span>)</span>
<span id="cb130-4"><a href="#cb130-4"></a><span class="fu">head</span>(flores.ancho)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;flores&gt;
   flores Ancho.Petalo Ancho.Sepalo Largo.Petalo Largo.Sepalo
    &lt;int&gt;        &lt;num&gt;        &lt;num&gt;        &lt;num&gt;        &lt;num&gt;
1:      1          0.2          3.5          1.4          5.1
2:      2          0.2          3.0          1.4          4.9
3:      3          0.2          3.2          1.3          4.7
4:      4          0.2          3.1          1.5          4.6
5:      5          0.2          3.6          1.4          5.0
6:      6          0.4          3.9          1.7          5.4</code></pre>
</div>
</div>
</section>
<section id="dcast-reajuste-de-largas-formas-1" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>dcast: reajuste de largas formas</code></h2>
<ul>
<li>dcast puede computarse a resumenes/funciones agregadas</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1"></a>flores.largo<span class="ot">=</span><span class="fu">melt</span>(flores.dt,<span class="at">measure=</span><span class="fu">measure</span>(part,dim,<span class="at">sep=</span><span class="st">"."</span>),<span class="at">value.name=</span><span class="st">"cm"</span>)</span>
<span id="cb132-2"><a href="#cb132-2"></a>flores.largo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Especie flores   part    dim    cm
        &lt;fctr&gt;  &lt;int&gt; &lt;char&gt; &lt;char&gt; &lt;num&gt;
  1:    setosa      1  Largo Sepalo   5.1
  2:    setosa      2  Largo Sepalo   4.9
  3:    setosa      3  Largo Sepalo   4.7
  4:    setosa      4  Largo Sepalo   4.6
  5:    setosa      5  Largo Sepalo   5.0
 ---                                     
596: virginica    146  Ancho Petalo   2.3
597: virginica    147  Ancho Petalo   1.9
598: virginica    148  Ancho Petalo   2.0
599: virginica    149  Ancho Petalo   2.3
600: virginica    150  Ancho Petalo   1.8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1"></a><span class="fu">dcast</span>(flores.largo, Especie <span class="sc">~</span> dim, <span class="at">fun.aggregate=</span>mean, <span class="at">value.var=</span><span class="st">"cm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;Especie&gt;
      Especie Petalo Sepalo
       &lt;fctr&gt;  &lt;num&gt;  &lt;num&gt;
1:     setosa  0.854  4.217
2: versicolor  2.793  4.353
3:  virginica  3.789  4.781</code></pre>
</div>
</div>
</section>
<section id="dcast-reajustes-de-largas-formas" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>dcast: reajustes de largas formas</code></h2>
<ul>
<li>dcast puede computar muchos resumenes/funciones agregadas</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1"></a>flores.largo<span class="ot">=</span><span class="fu">melt</span>(flores.dt,<span class="at">measure=</span><span class="fu">measure</span>(part,dim,<span class="at">sep=</span><span class="st">"."</span>),<span class="at">value.name=</span><span class="st">"cm"</span>)</span>
<span id="cb136-2"><a href="#cb136-2"></a>flores.largo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Especie flores   part    dim    cm
        &lt;fctr&gt;  &lt;int&gt; &lt;char&gt; &lt;char&gt; &lt;num&gt;
  1:    setosa      1  Largo Sepalo   5.1
  2:    setosa      2  Largo Sepalo   4.9
  3:    setosa      3  Largo Sepalo   4.7
  4:    setosa      4  Largo Sepalo   4.6
  5:    setosa      5  Largo Sepalo   5.0
 ---                                     
596: virginica    146  Ancho Petalo   2.3
597: virginica    147  Ancho Petalo   1.9
598: virginica    148  Ancho Petalo   2.0
599: virginica    149  Ancho Petalo   2.3
600: virginica    150  Ancho Petalo   1.8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1"></a><span class="fu">dcast</span>(flores.largo, Especie <span class="sc">~</span> dim, <span class="at">fun.aggregate=</span><span class="fu">list</span>(min, mean, max)) <span class="co">#value.var="cm")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;Especie&gt;
      Especie cm_min_Petalo cm_min_Sepalo cm_mean_Petalo cm_mean_Sepalo
       &lt;fctr&gt;         &lt;num&gt;         &lt;num&gt;          &lt;num&gt;          &lt;num&gt;
1:     setosa           0.1           2.3          0.854          4.217
2: versicolor           1.0           2.0          2.793          4.353
3:  virginica           1.4           2.2          3.789          4.781
   cm_max_Petalo cm_max_Sepalo
           &lt;num&gt;         &lt;num&gt;
1:           1.9           5.8
2:           5.1           7.0
3:           6.9           7.9</code></pre>
</div>
</div>
</section>
<section id="dcast-reajuste-de-largas-formas-2" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>dcast: reajuste de largas formas</code></h2>
<ul>
<li>dcast puede computar muchos valores de columnas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1"></a>flores.largo<span class="ot">=</span><span class="fu">melt</span>(flores.dt,<span class="at">measure=</span><span class="fu">measure</span>(part,value.name,<span class="at">sep=</span><span class="st">"."</span>))</span>
<span id="cb140-2"><a href="#cb140-2"></a>flores.largo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Especie flores   part Sepalo Petalo
        &lt;fctr&gt;  &lt;int&gt; &lt;char&gt;  &lt;num&gt;  &lt;num&gt;
  1:    setosa      1  Largo    5.1    1.4
  2:    setosa      2  Largo    4.9    1.4
  3:    setosa      3  Largo    4.7    1.3
  4:    setosa      4  Largo    4.6    1.5
  5:    setosa      5  Largo    5.0    1.4
 ---                                      
296: virginica    146  Ancho    3.0    2.3
297: virginica    147  Ancho    2.5    1.9
298: virginica    148  Ancho    3.0    2.0
299: virginica    149  Ancho    3.4    2.3
300: virginica    150  Ancho    3.0    1.8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1"></a><span class="fu">dcast</span>(flores.largo, Especie <span class="sc">+</span> part <span class="sc">~</span> ., <span class="at">fun.aggregate=</span><span class="fu">list</span>(min, max), <span class="at">value.var=</span><span class="fu">c</span>(<span class="st">"Sepalo"</span>, <span class="st">"Petalo"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;Especie, part&gt;
      Especie   part Sepalo_min Petalo_min Sepalo_max Petalo_max
       &lt;fctr&gt; &lt;char&gt;      &lt;num&gt;      &lt;num&gt;      &lt;num&gt;      &lt;num&gt;
1:     setosa  Ancho        2.3        0.1        4.4        0.6
2:     setosa  Largo        4.3        1.0        5.8        1.9
3: versicolor  Ancho        2.0        1.0        3.4        1.8
4: versicolor  Largo        4.9        3.0        7.0        5.1
5:  virginica  Ancho        2.2        1.4        3.8        2.5
6:  virginica  Largo        4.9        4.5        7.9        6.9</code></pre>
</div>
</div>
</section>
<section id="ejercicios-6" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Ejercicios</code></h2>
<table>
<thead>
<tr class="header">
<th></th>
<th>destino</th>
<th>EWR</th>
<th>JFK</th>
<th>LGA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>ABQ</td>
<td>0</td>
<td>278</td>
<td>0</td>
</tr>
<tr class="even">
<td>2</td>
<td>ACK</td>
<td>0</td>
<td>277</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3</td>
<td>AGS</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>4</td>
<td>ALB</td>
<td>169</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>5</td>
<td>ANC</td>
<td>13</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<ul>
<li>Hace una table como la de arriba, con una columna por cada origen, y una fila por cada destino(cuanta las entradas de los vuelos). Ayuda: usa destino~origen para crear un destino diferente en cada fila, y un diferente origen en cada columna</li>
<li>Especifica value.var=c(“atraso_salida”,“atraso_llegada”) con fun.aggregate=mean para comparar el promedio de retrados. Usa esta información para elegir el mejor aeropuerto por cada destino.</li>
</ul>
</section>
<section id="importa-data.table-en-tu-paquete" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Importa data.table en tu paquete</code></h2>
<ul>
<li><p>data.table actualmente es importada para 1400+ paquetes en CRAN. -“Imports:data.table” en la descripción.</p></li>
<li><p>“import(data.table)” en NAMESPACE.</p></li>
<li><p>.&lt;- j_variable &lt;- NULL en la primer linea en la función de R para abordarCRAN. NOTA acerca de una función/variable no visible.</p></li>
<li><p>data.table::setDTthreads(2) en ejemplos/testeos para abordar CRAN NOTA: poco tiempo necesita (por defecto data.table usa 1/2 de todo el CPUs)</p></li>
</ul>
</section>
<section id="nota-1-cran" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>NOTA 1 CRAN</code></h2>
<p>-<code>&lt;-variable&lt;-NULL</code> en la primer linea de la función de R para abordar<br>
CRAN NOTA: acerca de funciones/variable no visible.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1"></a>mi_funcion <span class="ot">&lt;-</span> <span class="cf">function</span>(DT) DT[, .(<span class="at">m=</span><span class="fu">mean</span>(x)) , by<span class="ot">=</span>y]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>** Chequea el código de R por posibles problemas… algunas notas para que consideres:</p>
<p>mi_funcion: si no está visible como función global por <code>.</code><br>
mi_funcion: si no está visible como función global variable<code>x</code><br>
mi_funcion: si no está visible como función global variable <code>y</code><br>
</p>
<ul>
<li>Chequea la nota como arriba, usa el código R de aquí abajo:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1"></a>mi_funcion <span class="ot">&lt;-</span> <span class="cf">function</span>(DT){</span>
<span id="cb145-2"><a href="#cb145-2"></a>  x <span class="ot">&lt;-</span> y <span class="ot">&lt;-</span> . <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb145-3"><a href="#cb145-3"></a>  DT[, .(<span class="at">m=</span><span class="fu">mean</span>(x)), by<span class="ot">=</span>y]</span>
<span id="cb145-4"><a href="#cb145-4"></a> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="nota2-cran" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>NOTA2: CRAN</code></h2>
<ul>
<li>CRAN requiere de paquetes para usar max 2CPUs durante chequeos.</li>
<li>data.table por defecto usa 1/2 de todos los CPUs de la máquina.</li>
</ul>
<p><img data-src="images/slide109.jpg"><br>
- Chequea la NOTA como arriba, usa el código R como en los ejemplos de arriba y testeos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1"></a> data.table<span class="sc">::</span><span class="fu">setDTthreads</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="contribuyendo-con-data.table" class="title-slide slide level1 smaller center" data-transition="Slide" data-background="#2C8484">
<h1>4/4Contribuyendo con data.table</h1>

</section>
<section id="comunidad-blog-y-encuesta" class="slide level2 smaller" data-transition="Slide" data-background="##E5E9E9">
<h2><code>Comunidad blog y encuesta</code></h2>
<div class="column smaller" style="width:60%;">
<ul>
<li>La mascota de data.table es un león marino que ladra “R R R”</li>
<li>La comunidad data.table tiene un nuevo blog, The Raft,</li>
</ul>
<p><a href="https://rdatatable-community.github.io/The-Raft/" class="uri">https://rdatatable-community.github.io/The-Raft/</a></p>
<p>Los leones marinos a menudo flotan juntos en la superficie del océano en grupos llamadas(balsas) ” rafts.” - Centro de Mamíferos Marinos.</p>
<ul>
<li>Por favor completa la encuesta.</li>
</ul>
<p><a href="https://tinyurl.com/datatable-survey" class="uri">https://tinyurl.com/datatable-survey</a></p>
<p>~10 minutos, cuentanos acerca del uso en data.table! (ayudanos a entender qué priorizar en el futuro)</p>
</div>
<div class="column smaller" style="width:30%;">
<p><img data-src="images/slide111.jpg"></p>
<p><img data-src="images/data.tables.png"></p>
</div>
</section>
<section id="repositorio-github" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Repositorio GitHub</code></h2>
<ul>
<li><p>data.table tiene un activo <em>issues/Pull Request(PR)</em> de extracción (PR) <a href="https://github.com/Rdatatable/data.table/" class="uri">https://github.com/Rdatatable/data.table/</a></p></li>
<li><p>1000+ open issues, 100+ open PRs</p></li>
<li><p>si tu tienes algo de tiempo/interés,podríamos usar tu ayuda! -Es fácil contribuir: prueba reproducir en problemas (De mucha ayuda para saber si hay algún problemas que sean reproducible)</p></li>
<li><p>Es una comunidad muy inclusiva luego de tu ingreso por primera vez en PR, serás invitado a unirte al grupo de github!</p></li>
<li><p>Ahora se vienen tiempos muy exitantes para involucrarte,ya que actualmente estamos creando un formal Documento escrito que describe la gobernanza descentralizada del proyecto, #5676</p></li>
</ul>
</section>
<section id="premios-de-traducción" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Premios de Traducción</code></h2>
<ul>
<li><p>En 2023-2025, la Fundación Nacional de Ciencias ha proporcionado fondos para apoyar y ampliar el ecosistema de usuarios y contribuyentes en torno a data.table</p></li>
<li><p>20 premios de traducción, de US$ 500 cada uno, para realizar documentación y mensajes más accesibles, ideas:</p></li>
<li><p>Traducir errores/advertencias/mensajes (el paquete potools puede ayudar)</p></li>
<li><p>Traducir las viñetas más importantes (introducción, importación, remodelación)</p></li>
<li><p>Traducir otra documentación (hojas de referencia, diapositivas, etc.)</p></li>
<li><p>Prioridad: portugués, español, chino, francés, ruso, árabe, hindi</p>
<ul>
<li>Llamado para propuestas: https://rdatatable-community.github.io/The-Raft/</li>
</ul></li>
</ul>
</section>
<section id="premios-en-viajes" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Premios en Viajes</code></h2>
<ul>
<li>En 2023-2025, la Fundación Nacional de Ciencias ha proporcionado fondos para apoyar y ampliar el ecosistema de usuarios y contribuyentes en torno a data.table</li>
<li>Ocho premios de viaje, 2700 dólares cada uno.</li>
<li>Los candidatos deben dar una charla sobre data.table en una conferencia con una audiencia relevante (posibles usuarios o contribuyentes de data.table)</li>
<li>Convocatoria de propuestas próximamente <a href="https://rdatatable-community.github.io/The-Raft/" class="uri">https://rdatatable-community.github.io/The-Raft/</a></li>
</ul>
</section>
<section id="resumen-de-data.table" class="slide level2 smaller" data-transition="Slide" data-background="#E5E9E9">
<h2><code>Resumen de data.table</code></h2>
<p><br>
<br>
</p>
<ul>
<li><p>Sintaxis concisa y consistente.</p></li>
<li><p>Rápida , eficiente en memoria.</p></li>
<li><p>No tiene dependencias ( es fácil de instalar)</p></li>
<li><p>No hay quiebres en los cambios ( es fácil de actualizar)</p></li>
<li><p>Inclusive el usuario/desarrollador de la comunidad tiene oportunidades de contribuir:</p></li>
<li><p>Premios en traducción, US$500 cada uno.</p></li>
<li><p>Premios en viajes, US$2700 cada uno.</p></li>
</ul>
</section>
<section id="gracias.-preguntas" class="slide level2" data-transition="Slide" data-background="#E5E9E9">
<h2><code>GRACIAS. ¿PREGUNTAS?</code></h2>
<p><br>
<code>Mara Destéfanis</code><br>
maragdestefanis@gmail.com<br>
<br>
<br>
</p>
<div class="column" style="width:10%;">
<p><img data-src="images/National%20Science%20Foundation.jpg" width="100"></p>
</div>
<div class="column" style="width:70%;">
<p>Fundado por el programa NSF POSE, proyecto #2303612. diapositivas adaptadas de Toby Dylan Hocking, Arun Srinivasan, y datatable-viñeta de introducción - gracias!</p>
</div>
<div class="column" style="width:10%;">
<p><img data-src="images/data.table.png" width="90"></p>
</div>
<p><img src="images/data.table.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="latinrdatatransforme_spanish_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>